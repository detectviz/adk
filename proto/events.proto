syntax = "proto3";

package google.adk.sre_assistant.events.v1;

option go_package = "github.com/sre-assistant/proto/gen/go/sre_assistant/events/v1";
option java_package = "com.sreassistant.events.v1";
option java_outer_classname = "EventsProto";

// 事件消息定義
message EventMessage {
  string event_id = 1;
  string event_type = 2;
  string source = 3;
  string subject = 4;
  int64 timestamp = 5;
  map<string, string> attributes = 6;
  bytes data = 7;
  string content_type = 8;
}

// Agent 事件
message AgentEvent {
  string agent_id = 1;
  string session_id = 2;
  AgentEventType event_type = 3;
  string message = 4;
  map<string, string> metadata = 5;
  int64 timestamp = 6;
}

// 工具執行事件
message ToolExecutionEvent {
  string tool_name = 1;
  string execution_id = 2;
  ToolExecutionStatus status = 3;
  map<string, string> input_parameters = 4;
  string result = 5;
  string error_message = 6;
  int64 start_time = 7;
  int64 end_time = 8;
}

// 診斷事件
message DiagnosticEvent {
  string incident_id = 1;
  DiagnosticEventType event_type = 2;
  string component = 3;
  Severity severity = 4;
  string description = 5;
  map<string, string> context = 6;
  repeated string recommendations = 7;
  int64 timestamp = 8;
}

// 修復操作事件
message RemediationEvent {
  string action_id = 1;
  string incident_id = 2;
  RemediationAction action_type = 3;
  string target_resource = 4;
  RemediationStatus status = 5;
  string result = 6;
  bool requires_approval = 7;
  string approver_id = 8;
  int64 timestamp = 9;
}

// Agent 事件類型
enum AgentEventType {
  AGENT_EVENT_TYPE_UNSPECIFIED = 0;
  AGENT_STARTED = 1;
  AGENT_STOPPED = 2;
  AGENT_ERROR = 3;
  MESSAGE_RECEIVED = 4;
  MESSAGE_SENT = 5;
  TOOL_CALLED = 6;
  THINKING_STARTED = 7;
  THINKING_FINISHED = 8;
}

// 工具執行狀態
enum ToolExecutionStatus {
  TOOL_EXECUTION_STATUS_UNSPECIFIED = 0;
  TOOL_STARTED = 1;
  TOOL_RUNNING = 2;
  TOOL_COMPLETED = 3;
  TOOL_FAILED = 4;
  TOOL_TIMEOUT = 5;
}

// 診斷事件類型
enum DiagnosticEventType {
  DIAGNOSTIC_EVENT_TYPE_UNSPECIFIED = 0;
  ISSUE_DETECTED = 1;
  ANALYSIS_STARTED = 2;
  ANALYSIS_COMPLETED = 3;
  ROOT_CAUSE_IDENTIFIED = 4;
  RECOMMENDATION_GENERATED = 5;
}

// 嚴重性等級
enum Severity {
  SEVERITY_UNSPECIFIED = 0;
  LOW = 1;
  MEDIUM = 2;
  HIGH = 3;
  CRITICAL = 4;
}

// 修復操作類型
enum RemediationAction {
  REMEDIATION_ACTION_UNSPECIFIED = 0;
  RESTART_SERVICE = 1;
  SCALE_UP = 2;
  SCALE_DOWN = 3;
  ROLLBACK_DEPLOYMENT = 4;
  APPLY_CONFIGURATION = 5;
  CLEAR_CACHE = 6;
  RESTART_POD = 7;
}

// 修復狀態
enum RemediationStatus {
  REMEDIATION_STATUS_UNSPECIFIED = 0;
  PENDING_APPROVAL = 1;
  APPROVED = 2;
  REJECTED = 3;
  IN_PROGRESS = 4;
  COMPLETED = 5;
  FAILED = 6;
  ROLLED_BACK = 7;
}