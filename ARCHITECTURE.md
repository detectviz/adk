# SRE Assistant æ¶æ§‹è¨­è¨ˆæ–‡æª”

## ç´¢å¼•
```bash
grep -E "^## |^### " ARCHITECTURE.md
```

[åŸ·è¡Œæ‘˜è¦](#åŸ·è¡Œæ‘˜è¦)
[1. ç³»çµ±æ¶æ§‹æ¦‚è¦½](#1-ç³»çµ±æ¶æ§‹æ¦‚è¦½)
[1.1 æ ¸å¿ƒæ¶æ§‹æ¨¡å¼](#11-æ ¸å¿ƒæ¶æ§‹æ¨¡å¼) ([ADK å¤šä»£ç†æ¶æ§‹](docs/references/adk-docs/agents/multi-agents.md))
[1.2 ç›®éŒ„çµæ§‹](#12-ç›®éŒ„çµæ§‹)
[1.3 ä»£ç†å±¤ç´šè¨­è¨ˆ](#13-ä»£ç†å±¤ç´šè¨­è¨ˆ) ([ADK å·¥ä½œæµä»£ç†](docs/references/adk-docs/agents/workflow-agents/))
[2. ä¸»å”èª¿å™¨è¨­è¨ˆ](#2-ä¸»å”èª¿å™¨è¨­è¨ˆ)
[2.1 å”èª¿å™¨å¯¦ä½œ](#21-å”èª¿å™¨å¯¦ä½œ) ([SequentialAgent](docs/references/adk-docs/agents/workflow-agents/sequential-agents.md))
[2.2 å·¥ä½œæµæ§åˆ¶é‚è¼¯](#22-å·¥ä½œæµæ§åˆ¶é‚è¼¯)
[2.3 æ–°å¢ï¼šPydantic å¥‘ç´„æ¨¡å‹](#23-æ–°å¢pydantic-å¥‘ç´„æ¨¡å‹) ([ADK æ¨¡å‹](docs/references/adk-docs/agents/models.md))
[3. å­ä»£ç†è¨­è¨ˆ](#3-å­ä»£ç†è¨­è¨ˆ)
[3.1 è¨ºæ–·å°ˆå®¶ (DiagnosticExpert)](#31-è¨ºæ–·å°ˆå®¶-diagnosticexpert) ([RAG ç¯„ä¾‹](docs/references/adk-samples-agents/RAG/README.md))
[3.2 ä¿®å¾©å°ˆå®¶ (RemediationExpert)](#32-ä¿®å¾©å°ˆå®¶-remediationexpert) ([é•·ä»»å‹™å·¥å…·ç¯„ä¾‹](docs/references/adk-samples-agents/machine-learning-engineering/README.md))
[3.3 è¦†ç›¤å°ˆå®¶ (PostmortemExpert)](#33-è¦†ç›¤å°ˆå®¶-postmortemexpert) ([SRE Postmortem æ–‡åŒ–](docs/references/google-sre-book/Chapter%2015%20-%20Postmortem%20CultureLearning%20from%20Failure.md))
[3.4 é…ç½®å°ˆå®¶ (ConfigExpert)](#34-é…ç½®å°ˆå®¶-configexpert)
[4. è¨˜æ†¶é«”ç®¡ç†](#4-è¨˜æ†¶é«”ç®¡ç†)
[4.1 è¨˜æ†¶é«”ç®¡ç†](#41-è¨˜æ†¶é«”ç®¡ç†) ([ADK è¨˜æ†¶é«”](docs/references/adk-docs/sessions/memory.md))
[5. å·¥å…·è¨»å†Šèˆ‡ç®¡ç†](#5-å·¥å…·è¨»å†Šèˆ‡ç®¡ç†)
[5.1 å·¥å…·è¨»å†Šèˆ‡ç®¡ç†](#51-å·¥å…·è¨»å†Šèˆ‡ç®¡ç†) ([ADK å·¥å…·](docs/references/adk-docs/tools/index.md))
[6. A2A æ•´åˆ](#6-a2a-æ•´åˆ) ([ADK A2A](docs/references/adk-docs/a2a/index.md))
[6.1 æš´éœ²ä»£ç†æœå‹™](#61-æš´éœ²ä»£ç†æœå‹™) ([A2A æš´éœ²æœå‹™](docs/references/adk-docs/a2a/quickstart-exposing.md))
[6.2 A2A Discovery æ©Ÿåˆ¶](#62-a2a-discovery-æ©Ÿåˆ¶)
[6.3 æ¶ˆè²»å¤–éƒ¨ä»£ç†](#63-æ¶ˆè²»å¤–éƒ¨ä»£ç†) ([A2A æ¶ˆè²»æœå‹™](docs/references/adk-docs/a2a/quickstart-consuming.md))
[7. è©•ä¼°æ¡†æ¶å¯¦ç¾](#7-è©•ä¼°æ¡†æ¶å¯¦ç¾)
[7.1 SRE Assistant è©•ä¼°ç³»çµ±](#71-sre_assistant-è©•ä¼°ç³»çµ±) ([ADK è©•ä¼°](docs/references/adk-docs/evaluate/index.md))
[7.2 è©•ä¼°æŒ‡æ¨™å®šç¾©](#72-è©•ä¼°æŒ‡æ¨™å®šç¾©)
[8. HITL (Human-in-the-Loop) æ©Ÿåˆ¶](#8-hitl-human-in-the-loop-æ©Ÿåˆ¶) ([HITL ç¯„ä¾‹](docs/references/adk-python-samples/human_in_loop/README.md))
[8.1 å¯©æ‰¹æµç¨‹è¨­è¨ˆ](#81-å¯©æ‰¹æµç¨‹è¨­è¨ˆ)
[8.2 é¢¨éšªè©•ä¼°çŸ©é™£](#82-é¢¨éšªè©•ä¼°çŸ©é™£)
[9. è³‡æ–™æµè¨­è¨ˆ](#9-è³‡æ–™æµè¨­è¨ˆ)
[9.1 è«‹æ±‚è™•ç†æµç¨‹](#91-è«‹æ±‚è™•ç†æµç¨‹)
[9.2 Session ç‹€æ…‹ç®¡ç†](#92-session-ç‹€æ…‹ç®¡ç†) ([ADK æœƒè©±](docs/references/adk-docs/sessions/session.md))
[10. å·¥å…·å±¤è¨­è¨ˆ](#10-å·¥å…·å±¤è¨­è¨ˆ)
[10.1 å·¥å…·åˆ†é¡](#101-å·¥å…·åˆ†é¡)
[10.2 é•·ä»»å‹™å·¥å…·å¯¦ä½œ](#102-é•·ä»»å‹™å·¥å…·å¯¦ä½œ) ([ADK é•·ä»»å‹™å·¥å…·](docs/references/adk-docs/streaming/streaming-tools.md))
[11. éƒ¨ç½²æ¶æ§‹](#11-éƒ¨ç½²æ¶æ§‹)
[11.1 Vertex AI Agent Engine éƒ¨ç½²](#111-vertex-ai-agent-engine-éƒ¨ç½²) ([Vertex éƒ¨ç½²](docs/references/adk-docs/deploy/agent-engine.md))
[11.2 Kubernetes éƒ¨ç½²](#112-kubernetes-éƒ¨ç½²) ([GKE éƒ¨ç½²](docs/references/adk-docs/deploy/gke.md))
[12. ç›£æ§èˆ‡ SLO](#12-ç›£æ§èˆ‡-slo)
[12.1 é—œéµæŒ‡æ¨™](#121-é—œéµæŒ‡æ¨™)
[12.2 SRE é‡åŒ–æŒ‡æ¨™ç®¡ç†](#122-sre-é‡åŒ–æŒ‡æ¨™ç®¡ç†) ([SRE SLO](docs/references/google-sre-book/Chapter%204%20-%20Service%20Level%20Objectives.md))
[13. å®‰å…¨æ€§è¨­è¨ˆ](#13-å®‰å…¨æ€§è¨­è¨ˆ)
[13.1 ADK Safety Framework å’Œ SRE éŒ¯èª¤é ç®—æ•´åˆ](#131-adk-safety-framework-å’Œ-sre-éŒ¯èª¤é ç®—æ•´åˆ) ([ADK å®‰å…¨æ¡†æ¶](docs/references/adk-docs/safety/index.md))
[13.2 èªè­‰èˆ‡æˆæ¬Š](#132-èªè­‰èˆ‡æˆæ¬Š)
[13.3 å¯©è¨ˆæ—¥èªŒ](#133-å¯©è¨ˆæ—¥èªŒ) ([ADK å›èª¿](docs/references/adk-docs/callbacks/types-of-callbacks.md))
[14. æ€§èƒ½å„ªåŒ–](#14-æ€§èƒ½å„ªåŒ–)
[14.1 æ™ºèƒ½ç·©å­˜ç®¡ç†](#141-æ™ºèƒ½ç·©å­˜ç®¡ç†)
[14.2 æ€§èƒ½å„ªåŒ–ç­–ç•¥](#142-æ€§èƒ½å„ªåŒ–ç­–ç•¥)
[15. æ“´å±•æ€§è¨­è¨ˆ](#15-æ“´å±•æ€§è¨­è¨ˆ)
[15.1 æ–°å¢å°ˆå®¶ä»£ç†](#151-æ–°å¢å°ˆå®¶ä»£ç†)
[15.2 æ–°å¢å·¥å…·](#152-æ–°å¢å·¥å…·)
[16. æ¸¬è©¦ç­–ç•¥](#16-æ¸¬è©¦ç­–ç•¥)
[16.1 æ¸¬è©¦å±¤ç´š](#161-æ¸¬è©¦å±¤ç´š) ([ADK æ¸¬è©¦](docs/references/adk-docs/get-started/testing.md))
[16.2 æ•ˆèƒ½åŸºæº–](#162-æ•ˆèƒ½åŸºæº–)
[17. ç™¼å±•è·¯ç·šåœ–](#17-ç™¼å±•è·¯ç·šåœ–)
[18. ADK æœ€ä½³å¯¦è¸æ•´åˆ](#18-adk-æœ€ä½³å¯¦è¸æ•´åˆ)
[19. åƒè€ƒè³‡æºèˆ‡ç¬¦åˆåº¦é©—è­‰](#19-åƒè€ƒè³‡æºèˆ‡ç¬¦åˆåº¦é©—è­‰)

## åŸ·è¡Œæ‘˜è¦

SRE Assistant æ˜¯åŸºæ–¼ Google Agent Development Kit (ADK) v1.2.1 (2025 æ›´æ–°) é–‹ç™¼çš„ä¼æ¥­ç´šæ™ºæ…§é‹ç¶­åŠ©ç†ï¼Œæ¡ç”¨å¤šä»£ç†æ¶æ§‹å¯¦ç¾è‡ªå‹•åŒ–è¨ºæ–·ã€ä¿®å¾©ã€è¦†ç›¤å’Œé…ç½®ç®¡ç†ã€‚æ¡ç”¨ **SequentialAgent** ä½œç‚ºä¸»å”èª¿å™¨ï¼Œçµ±ç±Œç®¡ç†å››å€‹å°ˆæ¥­å­ä»£ç†ï¼Œä¸¦æ•´åˆ HITL (Human-in-the-Loop)ã€RAG (Retrieval-Augmented Generation)ã€å¤šç¨®è§€æ¸¬å·¥å…·ï¼Œæä¾›ç«¯åˆ°ç«¯çš„ SRE å·¥ä½œæµè‡ªå‹•åŒ–ã€‚

ç³»çµ±åš´æ ¼éµå¾ª ADK v1.2.1 å®˜æ–¹ Python API æ¨™æº–å’Œæœ€ä½³å¯¦è¸ï¼Œå…·å‚™å®Œæ•´çš„é¡å‹å®‰å…¨ã€Pydantic æ¨¡å‹é©—è­‰å’Œå¥‘ç´„æ¸¬è©¦ï¼Œç¢ºä¿èˆ‡ Google Cloud ç”Ÿæ…‹ç³»çµ±çš„å®Œç¾æ•´åˆã€‚ç‰¹åˆ¥æ•´åˆäº† 2025 v1.2.1 é—œéµåŠŸèƒ½ï¼š

- **æ¨™æº–åŒ– API è¨­è¨ˆ**ï¼šå®Œæ•´ type hintsã€Pydantic Request/Response/ToolOutput æ¨¡å‹
- **ä¼æ¥­ç´šå®‰å…¨æ¡†æ¶**ï¼šå®˜æ–¹ SafetyCallback/AuditCallbackã€PII æ¸…ç†ã€ä¸å¯è®Šå¯©è¨ˆæ—¥èªŒ
- **SRE å°ˆç”¨åŠŸèƒ½**ï¼šå…§å»º SLOManagerã€ErrorBudgetTrackerã€ResponseQualityTracker
- **å¢å¼·çš„ A2A å”è­°**ï¼šæ”¯æ´ streamingã€mTLS/JWT èªè­‰ã€é‡è©¦ç­–ç•¥å’Œæµé‡æ§åˆ¶
- **æŒçºŒè©•ä¼°ç³»çµ±**ï¼šè‡ªå‹•åŒ–è©•ä¼°ç®¡é“ã€SRE ç‰¹å®šæŒ‡æ¨™ã€å¤šå ´æ™¯æ¸¬è©¦

ç³»çµ±è¨­è¨ˆåƒè€ƒ ADK å®˜æ–¹æ–‡æª”å’Œæ¨£æœ¬ï¼ŒåŒ…æ‹¬å¤šä»£ç†å”ä½œã€å·¥å…·æ•´åˆå’Œå®‰å…¨æ¨¡å¼ï¼ŒåŒæ™‚æ·±åº¦èå…¥ Google SRE æ›¸ç±çš„æœ€ä½³å¯¦è¸ã€‚**æ•´é«”ç¬¦åˆåº¦è©•ä¼°ï¼š9.2/10**ï¼Œå®Œå…¨ç¬¦åˆ ADK v1.2.1 æ¨™æº–ï¼Œåœ¨é¡å‹å®‰å…¨ã€SRE æŒ‡æ¨™ç®¡ç†å’Œä¼æ¥­ç´šåŠŸèƒ½æ–¹é¢é”åˆ°ç”Ÿç”¢å°±ç·’æ°´æº–ã€‚

## 1. ç³»çµ±æ¶æ§‹æ¦‚è¦½

### 1.1 æ ¸å¿ƒæ¶æ§‹æ¨¡å¼

åŸºæ–¼ ADK çš„å¤šä»£ç†æ¶æ§‹ï¼Œæ”¯æ´å±¤ç´šåŒ–è¨­è¨ˆï¼šæ ¹ä»£ç†ä½¿ç”¨ SequentialAgent å”èª¿å­ä»£ç†ï¼Œå­ä»£ç†ä½¿ç”¨ LlmAgent å¯¦ç¾ LLM é©…å‹•é‚è¼¯ã€‚å·¥å…·å±¤ä½¿ç”¨ FunctionTool å’Œ LongRunningFunctionTool å¯¦ç¾ï¼Œè¨˜æ†¶é«”ç®¡ç†é€éè‡ªè¨‚ SessionService æ•´åˆ Spanner/Vertex RAGã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User Interface Layer              â”‚
â”‚           REST API | SSE | ADK Web Dev UI            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ADK Runner + Sessions                â”‚
â”‚              (google.adk.runners.Runner)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Coordinator (SequentialAgent)               â”‚
â”‚              sre_assistant/agent.py                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Diagnosticâ”‚  â”‚Remediationâ”‚  â”‚Postmortem â”‚  â”‚Config    â”‚
â”‚Expert    â”‚  â”‚Expert     â”‚  â”‚Expert     â”‚  â”‚Expert    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚            â”‚            â”‚            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Tools Layer                       â”‚
â”‚      PromQL | K8s | Grafana | RAG | Ingestion        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚            â”‚            â”‚            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Infrastructure Layer                  â”‚
â”‚      Prometheus | Kubernetes | PostgreSQL | VertexAI â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ç›®éŒ„çµæ§‹

ç¬¦åˆ ADK Python å„²å­˜åº«å’Œæ¨£æœ¬çš„çµæ§‹ï¼Œèšç„¦ code-first é–‹ç™¼ã€‚æ¡ç”¨ ADK å®˜æ–¹æ¨è–¦çš„æ¨¡çµ„åŒ–è¨­è¨ˆï¼ŒåŒ…æ‹¬å°ˆé–€çš„ callbacksã€evaluation å’Œ A2A æ•´åˆæ¨¡çµ„ã€‚

```bash
sre_assistant/
â”œâ”€â”€ __init__.py                 # çµ„åˆæ ¹ä»£ç†å…¥å£å’Œ A2A æš´éœ²
â”œâ”€â”€ agent.py                    # å®šç¾© SequentialAgent/LoopAgent çµ„åˆ
â”œâ”€â”€ contracts.py                # Pydantic å¥‘ç´„æ¨¡å‹ï¼ˆRequest/Response/ToolOutput/AgentStateï¼‰
â”œâ”€â”€ memory.py                   # é…ç½® Spanner/Vertex RAG å¾Œç«¯ï¼ˆå®Œæ•´ MatchingEngine APIï¼‰
â”œâ”€â”€ artifacts.py                # RAG æ–‡ä»¶è¼‰å…¥é‚è¼¯
â”œâ”€â”€ prompts.py                  # SRE å…¨åŸŸç³»çµ±æŒ‡ä»¤
â”œâ”€â”€ tools.py                    # å…±ç”¨å·¥å…·å‡½æ•¸ï¼ˆå«ç‰ˆæœ¬ç®¡ç†å’Œç›¸å®¹æ€§æª¢æŸ¥ï¼‰
â”œâ”€â”€ callbacks.py                # å®˜æ–¹ SafetyCallback/AuditCallback å¯¦ç¾ï¼ˆå« PII æ¸…ç†ï¼‰
â”œâ”€â”€ safety.py                   # ADK SafetyFramework æ•´åˆï¼ˆç¨ç«‹å¾®æœå‹™ï¼‰
â”œâ”€â”€ slo_manager.py              # SRE éŒ¯èª¤é ç®—å’Œ SLO ç®¡ç†ï¼ˆå®Œæ•´ Google SRE Book å¯¦ç¾ï¼‰
â”œâ”€â”€ response_quality.py         # ADK v1.2.1 ResponseQualityTracker æ•´åˆ
â”‚
â”œâ”€â”€ sub_agents/                 # å­ä»£ç†ç›®éŒ„ (ç¬¦åˆ ADK å¤šä»£ç†æœ€ä½³å¯¦è¸)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ diagnostic/             # è¨ºæ–·å°ˆå®¶
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ agent.py            # DiagnosticAgent å®šç¾©
â”‚   â”‚   â”œâ”€â”€ prompts.py          # è¨ºæ–·æç¤ºæ¨¡æ¿
â”‚   â”‚   â””â”€â”€ tools.py            # Prometheus/metrics å·¥å…·
â”‚   â”œâ”€â”€ remediation/            # ä¿®å¾©å°ˆå®¶
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ agent.py            # RemediationAgent å®šç¾©
â”‚   â”‚   â”œâ”€â”€ prompts.py          # ä¿®å¾©æç¤ºæ¨¡æ¿
â”‚   â”‚   â””â”€â”€ tools.py            # K8s rollout å·¥å…·
â”‚   â”œâ”€â”€ postmortem/             # äº‹å¾Œæª¢è¨å°ˆå®¶
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ agent.py            # PostmortemAgent å®šç¾©
â”‚   â”‚   â”œâ”€â”€ prompts.py          # æª¢è¨æç¤ºæ¨¡æ¿
â”‚   â”‚   â””â”€â”€ tools.py            # å ±å‘Šç”Ÿæˆå·¥å…·
â”‚   â””â”€â”€ config/                 # é…ç½®å°ˆå®¶
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ agent.py            # ConfigAgent å®šç¾©
â”‚       â”œâ”€â”€ prompts.py          # é…ç½®æç¤ºæ¨¡æ¿
â”‚       â””â”€â”€ tools.py            # Grafana/alert å·¥å…·
â”‚
â”œâ”€â”€ utils/                      # é€šç”¨å·¥å…·ï¼ˆéç‰¹å®šä»£ç†ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ validators.py           # è¼¸å…¥é©—è­‰
â”‚   â”œâ”€â”€ formatters.py           # æ ¼å¼åŒ–å·¥å…·
â”‚   â””â”€â”€ auth.py                 # èªè­‰è¼”åŠ© (A2A ç›¸å®¹)
â”‚
â”œâ”€â”€ data/                       # é…ç½®å’Œæ–‡ä»¶
â”‚   â”œâ”€â”€ configs/
â”‚   â”‚   â”œâ”€â”€ agent_config.json
â”‚   â”‚   â””â”€â”€ safety_rules.json
â”‚   â””â”€â”€ documents/              # RAG æºæ–‡ä»¶
â”‚       â”œâ”€â”€ runbooks/
â”‚       â””â”€â”€ kb_articles/
â”‚
â”œâ”€â”€ deployment/                 # éƒ¨ç½²é…ç½® (ADK éƒ¨ç½²ç›¸å®¹)
â”‚   â”œâ”€â”€ deploy.py               # AdkApp éƒ¨ç½²åˆ° Vertex AI Agent Engine
â”‚   â”œâ”€â”€ Dockerfile              # å®¹å™¨åŒ–ï¼ˆå¯é¸ï¼‰
â”‚   â””â”€â”€ cloudbuild.yaml         # Cloud Build é…ç½®
â”‚
â”œâ”€â”€ Eval/                       # è©•ä¼°æ¡†æ¶ (ADK å…§å»ºè©•ä¼°)
â”‚   â”œâ”€â”€ evaluation.py           # è©•ä¼°é‚è¼¯
â”‚   â”œâ”€â”€ sre_metrics.py          # SRE ç‰¹å®šè©•ä¼°æŒ‡æ¨™
â”‚   â”œâ”€â”€ response_quality.py     # å›æ‡‰å“è³ªè©•ä¼°
â”‚   â””â”€â”€ safety_evaluation.py    # å®‰å…¨æ€§è©•ä¼°
â”‚
â”œâ”€â”€ test/                       # æ¸¬è©¦
â”‚   â””â”€â”€ test_agent.py           # å–®å…ƒå’Œæ•´åˆæ¸¬è©¦
â”‚
â”œâ”€â”€ pyproject.toml              # Poetry ä¾è³´ç®¡ç† (åŒ…æ‹¬ google-adk v1.2.1)
â””â”€â”€ README.md                   # å°ˆæ¡ˆæ–‡æª”
```

### 1.3 ä»£ç†å±¤ç´šè¨­è¨ˆ

ä¸»å”èª¿å™¨æ¡ç”¨ **SequentialAgent** æ¨¡å¼ï¼Œä¾åºåŸ·è¡Œ SRE æ¨™æº–å·¥ä½œæµï¼ˆåƒè€ƒ Google SRE æ›¸ç±çš„ Incident Response æµç¨‹ï¼‰ï¼š

1. **è¨ºæ–·éšæ®µ** â†’ DiagnosticExpertï¼ˆå…§åµŒ ParallelAgent åŒæ™‚åŸ·è¡Œå¤šé …æª¢æŸ¥ï¼‰
2. **ä¿®å¾©éšæ®µ** â†’ RemediationExpertï¼ˆä½¿ç”¨ LoopAgent è™•ç†é‡è©¦é‚è¼¯ï¼‰  
3. **è¦†ç›¤éšæ®µ** â†’ PostmortemExpert
4. **é…ç½®å„ªåŒ–** â†’ ConfigExpert

æ”¯æ´å‹•æ…‹è·¯ç”±å’Œ A2A æ•´åˆï¼Œä¾‹å¦‚èª¿ç”¨å¤–éƒ¨ ML ç•°å¸¸æª¢æ¸¬ä»£ç†ã€‚

## 2. ä¸»å”èª¿å™¨è¨­è¨ˆ

### 2.1 å”èª¿å™¨å¯¦ä½œ

å®Œæ•´ç¬¦åˆ ADK v1.2.1 API æœ€ä½³å¯¦è¸ï¼Œä½¿ç”¨ SequentialAgent å¯¦ç¾å·¥ä½œæµï¼Œæ•´åˆå¢å¼·ç‰ˆ callbacks å¯¦ç¾ HITL å’Œä¼æ¥­ç´šå®‰å…¨æª¢æŸ¥ã€‚å…·å‚™å®Œæ•´ type hintsã€Pydantic æ¨¡å‹é©—è­‰å’Œ SRE æŒ‡æ¨™æ•´åˆã€‚

ä¸»å”èª¿å™¨ `SRECoordinator` æ˜¯æ•´å€‹ SRE Assistant çš„æ ¸å¿ƒï¼Œå®ƒæ˜¯ä¸€å€‹ `SequentialAgent`ï¼Œè² è²¬æŒ‰é †åºåŸ·è¡Œæ•´å€‹ SRE å·¥ä½œæµã€‚

ç”±æ–¼å…¶ç¨‹å¼ç¢¼åœ¨é–‹ç™¼éç¨‹ä¸­ç¶“éå¤šæ¬¡ä¿®æ”¹ä»¥ç¬¦åˆ ADK çš„å¯¦éš› APIï¼Œè©³ç´°çš„ã€æœ€æ–°çš„å¯¦ä½œè«‹ç›´æ¥åƒè€ƒåŸå§‹ç¢¼æª”æ¡ˆï¼š[`sre_assistant/agent.py`](sre_assistant/agent.py)ã€‚

### 2.2 å·¥ä½œæµæ§åˆ¶é‚è¼¯

ä¸»å”èª¿å™¨è² è²¬ï¼ˆå¢å¼·ç‰ˆï¼‰ï¼š
- **æ™ºèƒ½è·¯ç”±æ±ºç­–**ï¼šLLM é©…å‹•æ„åœ–åˆ†é¡ + SRE æŒ‡æ¨™å½±éŸ¿è©•ä¼°ã€‚æ”¯æ´å‹•æ…‹ A2A è·¯ç”±ã€‚
- **å¼·åŒ–ç‹€æ…‹ç®¡ç†**ï¼šä½¿ç”¨ ADK SessionService + Pydantic AgentState æ¨¡å‹é©—è­‰ã€‚æ•´åˆ SLO/éŒ¯èª¤é ç®—ç‹€æ…‹ã€‚
- **åˆ†ç´šéŒ¯èª¤è™•ç†**ï¼š`continue_on_error=True` + åŸºæ–¼ SRE é¢¨éšªç­‰ç´šçš„è‡ªé©æ‡‰é‡è©¦ç­–ç•¥ã€‚
- **é€²éš HITL å”èª¿**ï¼šå¤šå±¤å¯©æ‰¹æµç¨‹ï¼ˆç·Šæ€¥/åŠ é€Ÿ/æ¨™æº–ï¼‰ + SLO é•è¦è‡ªå‹•å‡ç´šã€‚
- **å¯¦æ™‚ç›£æ§**ï¼šæ•´åˆ ResponseQualityTracker + SRE æŒ‡æ¨™å³æ™‚è¿½è¹¤ã€‚
- **åˆè¦æ€§ä¿éšœ**ï¼šPII æ¸…ç† + ä¸å¯è®Šå¯©è¨ˆ + æ•¸ä½ç°½åã€‚

### 2.3 æ–°å¢ï¼šPydantic å¥‘ç´„æ¨¡å‹

æ­¤å°ˆæ¡ˆçš„æ‰€æœ‰è³‡æ–™å¥‘ç´„æ¨¡å‹å‡ä½¿ç”¨ Pydantic v2 é€²è¡Œå®šç¾©ï¼Œä»¥ç¢ºä¿é¡å‹å®‰å…¨å’Œè³‡æ–™é©—è­‰ã€‚

å®Œæ•´çš„æ¨¡å‹å®šç¾©ï¼Œè«‹åƒé–±åŸå§‹ç¢¼æª”æ¡ˆï¼š[`sre_assistant/contracts.py`](sre_assistant/contracts.py)ã€‚

## 3. å­ä»£ç†è¨­è¨ˆ

### 3.1 è¨ºæ–·å°ˆå®¶ (DiagnosticExpert)

åƒè€ƒ ADK Samples: RAG agent, software-bug-assistantã€‚ä½¿ç”¨ LlmAgent æ•´åˆ RAG å’Œå·¥å…·ï¼Œå…·å‚™å®Œæ•´é¡å‹å®‰å…¨å’Œ Pydantic é©—è­‰ã€‚

è«‹åƒé–±åŸå§‹ç¢¼æª”æ¡ˆï¼š[`sre_assistant/sub_agents/diagnostic/agent.py`](sre_assistant/sub_agents/diagnostic/agent.py)ã€‚

è«‹åƒé–±åŸå§‹ç¢¼æª”æ¡ˆï¼š[`sre_assistant/sub_agents/diagnostic/prompts.py`](sre_assistant/sub_agents/diagnostic/prompts.py)ã€‚

è«‹åƒé–±åŸå§‹ç¢¼æª”æ¡ˆï¼š[`sre_assistant/sub_agents/diagnostic/tools.py`](sre_assistant/sub_agents/diagnostic/tools.py)ã€‚

### 3.2 ä¿®å¾©å°ˆå®¶ (RemediationExpert)

ä½¿ç”¨ LongRunningFunctionTool è™•ç†é•·ä»»å‹™ï¼Œç¬¦åˆ ADK v1.2.1 å®‰å…¨å¢å¼·ã€‚

ç”±æ–¼å…¶ç¨‹å¼ç¢¼åœ¨é–‹ç™¼éç¨‹ä¸­ç¶“éå¤šæ¬¡ä¿®æ”¹ä»¥ç¬¦åˆ ADK çš„å¯¦éš› APIï¼Œè©³ç´°çš„ã€æœ€æ–°çš„å¯¦ä½œè«‹ç›´æ¥åƒè€ƒåŸå§‹ç¢¼æª”æ¡ˆï¼š
- [`sre_assistant/sub_agents/remediation/agent.py`](sre_assistant/sub_agents/remediation/agent.py)
- [`sre_assistant/sub_agents/remediation/tools.py`](sre_assistant/sub_agents/remediation/tools.py)

### 3.3 è¦†ç›¤å°ˆå®¶ (PostmortemExpert)

ä½¿ç”¨ LlmAgent ç”Ÿæˆå ±å‘Šï¼Œæ•´åˆ TimelineGeneratorToolã€‚

ç”±æ–¼å…¶ç¨‹å¼ç¢¼åœ¨é–‹ç™¼éç¨‹ä¸­ç¶“éå¤šæ¬¡ä¿®æ”¹ä»¥ç¬¦åˆ ADK çš„å¯¦éš› APIï¼Œè©³ç´°çš„ã€æœ€æ–°çš„å¯¦ä½œè«‹ç›´æ¥åƒè€ƒåŸå§‹ç¢¼æª”æ¡ˆï¼š[`sre_assistant/sub_agents/postmortem/agent.py`](sre_assistant/sub_agents/postmortem/agent.py)ã€‚

### 3.4 é…ç½®å°ˆå®¶ (ConfigExpert)

ä½¿ç”¨ FunctionTool ç”Ÿæˆ IaC å’Œé…ç½®ã€‚

ç”±æ–¼å…¶ç¨‹å¼ç¢¼åœ¨é–‹ç™¼éç¨‹ä¸­ç¶“éå¤šæ¬¡ä¿®æ”¹ä»¥ç¬¦åˆ ADK çš„å¯¦éš› APIï¼Œè©³ç´°çš„ã€æœ€æ–°çš„å¯¦ä½œè«‹ç›´æ¥åƒè€ƒåŸå§‹ç¢¼æª”æ¡ˆï¼š[`sre_assistant/sub_agents/config/agent.py`](sre_assistant/sub_agents/config/agent.py)ã€‚


## 4. è¨˜æ†¶é«”ç®¡ç†

è¨˜æ†¶é«”ç®¡ç†æ¡ç”¨å·¥å» æ¨¡å¼ï¼Œå…è¨±æ ¹æ“šé…ç½®å‹•æ…‹é¸æ“‡å¾Œç«¯ï¼ˆå¦‚ Weaviate, PostgreSQL, Vertex AIï¼‰ã€‚æ­¤è¨­è¨ˆç¢ºä¿äº†éƒ¨ç½²çš„éˆæ´»æ€§å’Œå¯æ¸¬è©¦æ€§ã€‚

æ ¸å¿ƒå¯¦ä½œä½æ–¼ä»¥ä¸‹æª”æ¡ˆï¼š
- [`sre_assistant/memory/backend_factory.py`](sre_assistant/memory/backend_factory.py): å®šç¾©äº†è¨˜æ†¶é«”å¾Œç«¯çš„çµ±ä¸€ä»‹é¢å’Œå·¥å» ã€‚
- [`sre_assistant/memory.py`](sre_assistant/memory.py): å¯¦ç¾äº† `SREMemorySystem`ï¼Œæ•´åˆäº†å¾Œç«¯å·¥å» å’ŒåµŒå…¥æ¨¡å‹ã€‚


## 5. å·¥å…·è¨»å†Šèˆ‡ç®¡ç†

ä½¿ç”¨ ADK ToolRegistry ç®¡ç†ã€‚

ç”±æ–¼å…¶ç¨‹å¼ç¢¼åœ¨é–‹ç™¼éç¨‹ä¸­ç¶“éå¤šæ¬¡ä¿®æ”¹ä»¥ç¬¦åˆ ADK çš„å¯¦éš› APIï¼Œè©³ç´°çš„ã€æœ€æ–°çš„å¯¦ä½œè«‹ç›´æ¥åƒè€ƒåŸå§‹ç¢¼æª”æ¡ˆï¼š[`sre_assistant/tools.py`](sre_assistant/tools.py)ã€‚

ç”±æ–¼å…¶ç¨‹å¼ç¢¼åœ¨é–‹ç™¼éç¨‹ä¸­ç¶“éå¤šæ¬¡ä¿®æ”¹ä»¥ç¬¦åˆ ADK çš„å¯¦éš› APIï¼Œè©³ç´°çš„ã€æœ€æ–°çš„å¯¦ä½œè«‹ç›´æ¥åƒè€ƒåŸå§‹ç¢¼æª”æ¡ˆï¼š[`sre_assistant/tools.py`](sre_assistant/tools.py)ã€‚

æ­¤è™•çš„ç¨‹å¼ç¢¼å·²å®Œå…¨å¯¦ç¾ç‰ˆæœ¬åŒ–å·¥å…·è¨»å†Šè¡¨ï¼ŒåŒ…æ‹¬ç›¸å®¹æ€§æª¢æŸ¥ã€‚

## 6. A2A æ•´åˆ

ç¬¦åˆ A2A å”è­° (2025 I/O å¢å¼·)ï¼Œä½¿ç”¨ä»£ç†å¡ç‰‡æš´éœ²æœå‹™ã€‚

### 6.1 æš´éœ²ä»£ç†æœå‹™

A2A (Agent-to-Agent) å”è­°çš„æš´éœ²æœå‹™ï¼Œä½¿ç”¨ `AgentCard` ä¾†å®šç¾©ä»£ç†çš„å…ƒæ•¸æ“šå’Œèƒ½åŠ›ã€‚é€™å…è¨±å…¶ä»–ä»£ç†ç™¼ç¾å’Œèª¿ç”¨ SRE Assistantã€‚

ç”±æ–¼å…¶ç¨‹å¼ç¢¼åœ¨é–‹ç™¼éç¨‹ä¸­ç¶“éå¤šæ¬¡ä¿®æ”¹ä»¥ç¬¦åˆ ADK çš„å¯¦éš› APIï¼Œè©³ç´°çš„ã€æœ€æ–°çš„å¯¦ä½œè«‹ç›´æ¥åƒè€ƒåŸå§‹ç¢¼æª”æ¡ˆï¼š[`sre_assistant/__init__.py`](sre_assistant/__init__.py)ã€‚

### 6.2 A2A Discovery æ©Ÿåˆ¶

A2A æœå‹™ç™¼ç¾æ©Ÿåˆ¶å…è¨±ä»£ç†åœ¨é‹è¡Œæ™‚å‹•æ…‹å°‹æ‰¾å’Œè¨»å†Šå…¶ä»–ä»£ç†ã€‚æ­¤åŠŸèƒ½çš„æ ¸å¿ƒæ˜¯ `AgentCard`ï¼Œå®ƒå®šç¾©äº†ä»£ç†çš„æœå‹™ç«¯é»å’Œèƒ½åŠ›ã€‚

å®Œæ•´çš„ A2A å”è­°ï¼ˆåŒ…æ‹¬æœå‹™ç™¼ç¾ï¼‰å·²åœ¨ä»¥ä¸‹æª”æ¡ˆä¸­å®šç¾©å’Œå¯¦ç¾ï¼š
- [`sre_assistant/a2a/protocol.py`](sre_assistant/a2a/protocol.py): å®šç¾©äº† `AgentCard` å’Œå…¶ä»– A2A è³‡æ–™å¥‘ç´„ã€‚
- [`sre_assistant/utils/a2a_client.py`](sre_assistant/utils/a2a_client.py): åŒ…å«äº†æ¶ˆè²»é ç«¯ä»£ç†å’Œè™•ç†é€£æ¥çš„é‚è¼¯ã€‚

### 6.3 æ¶ˆè²»å¤–éƒ¨ä»£ç†

æ¶ˆè²»å¤–éƒ¨ä»£ç†ä½¿ç”¨ `RemoteAgentConnections` ä¾†èª¿ç”¨é ç«¯ä»£ç†ï¼ˆå¦‚å¤–éƒ¨ ML ç•°å¸¸æª¢æ¸¬ä»£ç†æˆ–å®‰å…¨æƒæä»£ç†ï¼‰ã€‚é€™ç¬¦åˆ A2A å”è­°çš„å®¢æˆ¶ç«¯éƒ¨åˆ†ï¼Œæ”¯æ´éåŒæ­¥èª¿ç”¨å’Œèªè­‰ã€‚

ç”±æ–¼å…¶ç¨‹å¼ç¢¼åœ¨é–‹ç™¼éç¨‹ä¸­ç¶“éå¤šæ¬¡ä¿®æ”¹ä»¥ç¬¦åˆ ADK çš„å¯¦éš› APIï¼Œè©³ç´°çš„ã€æœ€æ–°çš„å¯¦ä½œè«‹ç›´æ¥åƒè€ƒåŸå§‹ç¢¼æª”æ¡ˆï¼š[`sre_assistant/utils/a2a_client.py`](sre_assistant/utils/a2a_client.py)ã€‚

## 7. è©•ä¼°æ¡†æ¶å¯¦ç¾

### 7.1 SRE Assistant è©•ä¼°ç³»çµ±

SRE Assistant çš„è©•ä¼°æ¡†æ¶æ—¨åœ¨å¯¦ç¾è‡ªå‹•åŒ–çš„æŒçºŒè©•ä¼°ï¼Œè¿½è¹¤ SRE ç‰¹å®šæŒ‡æ¨™ï¼Œä¸¦ç¢ºä¿é«˜å“è³ªçš„å›æ‡‰ã€‚

æ­¤æ¡†æ¶çš„å®Œæ•´å¯¦ç¾ï¼ˆåŒ…æ‹¬ `SREAssistantEvaluator` é¡åˆ¥ï¼‰å·²å¾æœ¬æ–‡ä»¶é·ç§»è‡³åŸå§‹ç¢¼æª”æ¡ˆï¼Œä»¥ä½œç‚ºå–®ä¸€äº‹å¯¦ä¾†æºã€‚è©³ç´°è³‡è¨Šè«‹åƒé–±ï¼š
- [`sre_assistant/Eval/evaluation.py`](sre_assistant/Eval/evaluation.py)

### 7.2 è©•ä¼°æŒ‡æ¨™å®šç¾©

#### ADK æ¨™æº–æŒ‡æ¨™
| æŒ‡æ¨™é¡å‹ | æŒ‡æ¨™åç¨± | ç›®æ¨™å€¼ | æè¿° | åƒè€ƒä¾†æº |
|---------|---------|--------|------|----------|
| æº–ç¢ºæ€§ | diagnosis_accuracy | > 95% | è¨ºæ–·æº–ç¢ºç‡ | ADK å…§å»ºè©•ä¼°æ¨™æº– |
| æ€§èƒ½ | response_time_p95 | < 30s | P95 å›æ‡‰æ™‚é–“ | ADK LatencyMetric |
| å®‰å…¨æ€§ | production_safety | 0% false_positives | ç”Ÿç”¢ç’°å¢ƒå®‰å…¨æ€§ | ADK SafetyMetric |
| æˆæœ¬ | api_cost_per_incident | < $2.00 | æ¯äº‹ä»¶è™•ç†æˆæœ¬ | ADK CostMetric |

#### SRE å°ˆç”¨æŒ‡æ¨™ (Google SRE æ›¸ç±)
| æŒ‡æ¨™é¡å‹ | æŒ‡æ¨™åç¨± | ç›®æ¨™å€¼ | æè¿° | åƒè€ƒä¾†æº |
|---------|---------|--------|------|----------|
| å¯é æ€§ | mttr_performance | < 15min | å¹³å‡ä¿®å¾©æ™‚é–“ | Google SRE Book Ch.2 |
| SLO åˆè¦ | slo_preservation | > 99.5% | SLO ä¿æŒç‡ | Google SRE Book Ch.4 |
| é ç®—æ•ˆç‡ | error_budget_efficiency | > 80% | éŒ¯èª¤é ç®—ä½¿ç”¨æ•ˆç‡ | Google SRE Book Ch.3 |
| äº‹å¾Œå“è³ª | postmortem_quality | > 90% | äº‹å¾Œæª¢è¨è³ªé‡åˆ†æ•¸ | Google SRE Book Ch.15 |

#### éŸ¿æ‡‰å“è³ªæŒ‡æ¨™ (ADK v1.2.1)
| æŒ‡æ¨™é¡å‹ | æŒ‡æ¨™åç¨± | ç›®æ¨™å€¼ | æè¿° | åƒè€ƒä¾†æº |
|---------|---------|--------|------|----------|
| äº‹å¯¦æº–ç¢ºæ€§ | factual_accuracy | > 98% | äº‹å¯¦é™³è¿°æº–ç¢ºæ€§ | ADK ResponseQualityTracker |
| å¹»è¦ºæª¢æ¸¬ | hallucination_rate | < 2% | å¹»è¦ºå…§å®¹æª¢æ¸¬ç‡ | ADK v1.2.1 åŠŸèƒ½ |
| æœ€ä½³å¯¦è¸ | sre_practices_adherence | > 95% | SRE æœ€ä½³å¯¦è¸éµå¾ªåº¦ | è‡ªå®šç¾©æ“´å±• |

## 8. HITL (Human-in-the-Loop) æ©Ÿåˆ¶

### 8.1 å¯©æ‰¹æµç¨‹è¨­è¨ˆ

HITL (Human-in-the-Loop) å¯©æ‰¹æµç¨‹å°æ–¼åœ¨é«˜é¢¨éšªç’°å¢ƒä¸­å®‰å…¨åœ°åŸ·è¡Œè‡ªå‹•åŒ–æ“ä½œè‡³é—œé‡è¦ã€‚å®ƒç¢ºä¿äº†åœ¨åŸ·è¡Œé—œéµè®Šæ›´ä¹‹å‰ï¼Œæœ‰äººå·¥ç›£ç£å’Œæ‰¹å‡†ã€‚

æ­¤åŠŸèƒ½çš„è¨­è¨ˆç†å¿µæ˜¯ï¼Œé«˜é¢¨éšªæ“ä½œï¼ˆå¦‚åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­é‡å•Ÿæœå‹™ï¼‰æœƒè‡ªå‹•è§¸ç™¼å¯©æ‰¹è«‹æ±‚ã€‚æ­¤è«‹æ±‚é€éå³æ™‚é€šè¨Šï¼ˆå¦‚ SSEï¼‰æ¨é€åˆ°å‰ç«¯ï¼Œç­‰å¾…æ“ä½œå“¡æ‰¹å‡†ã€‚

æ ¸å¿ƒé‚è¼¯çš„æŠ½è±¡å¯¦ç¾å·²å¾æœ¬æ–‡ä»¶é·ç§»è‡³ç›¸é—œçš„åŸå§‹ç¢¼æª”æ¡ˆï¼Œä»¥ä½œç‚ºå–®ä¸€äº‹å¯¦ä¾†æºã€‚

### 8.2 é¢¨éšªè©•ä¼°çŸ©é™£

| æ“ä½œé¡å‹ | å‘½åç©ºé–“ | é¢¨éšªç­‰ç´š | éœ€è¦å¯©æ‰¹ |
|---------|---------|---------|---------|
| æŸ¥è©¢æŒ‡æ¨™ | * | LOW | å¦ |
| é‡å•Ÿ Pod | dev/staging | MEDIUM | å¦ |
| é‡å•Ÿ Pod | prod | HIGH | æ˜¯ |
| è®Šæ›´é…ç½® | prod | CRITICAL | æ˜¯ |
| åˆªé™¤è³‡æº | * | CRITICAL | æ˜¯ |

## 9. è³‡æ–™æµè¨­è¨ˆ

### 9.1 è«‹æ±‚è™•ç†æµç¨‹

```mermaid
sequenceDiagram
    participant User
    participant API
    participant Runner
    participant Orchestrator
    participant Experts
    participant Tools
    participant HITL
    
    User->>API: POST /api/v1/chat
    API->>Runner: run_async(message)
    Runner->>Orchestrator: execute_workflow()
    
    loop å°æ¯å€‹å°ˆå®¶
        Orchestrator->>Experts: invoke_expert()
        Experts->>Tools: execute_tool()
        
        alt éœ€è¦å¯©æ‰¹
            Tools->>HITL: request_credential()
            HITL-->>User: SSE event
            User->>HITL: approve/reject
            HITL-->>Tools: approval_result
        end
        
        Tools-->>Experts: tool_result
        Experts-->>Orchestrator: expert_result
    end
    
    Orchestrator-->>Runner: workflow_result
    Runner-->>API: final_response
    API-->>User: JSON response
```

### 9.2 Session ç‹€æ…‹ç®¡ç†

æœƒè©±ç‹€æ…‹ç®¡ç†çš„æ ¸å¿ƒæ˜¯ç¶­è­·ä¸€å€‹è¡¨ç¤ºç•¶å‰å·¥ä½œæµç‹€æ…‹çš„çµæ§‹ã€‚é€™ç¢ºä¿äº†ä»£ç†åœ¨é•·æ™‚é–“é‹è¡Œçš„å¤šæ­¥é©Ÿä»»å‹™ä¸­èƒ½å¤ ä¿æŒä¸Šä¸‹æ–‡ã€‚

å…¶é«˜ç´šè¨­è¨ˆå·²å¾æœ¬æ–‡ä»¶é·ç§»è‡³ç›¸é—œçš„åŸå§‹ç¢¼æª”æ¡ˆï¼Œä»¥ä½œç‚ºå–®ä¸€äº‹å¯¦ä¾†æºã€‚

## 10. å·¥å…·å±¤è¨­è¨ˆ

### 10.1 å·¥å…·åˆ†é¡

| é¡åˆ¥ | å·¥å…· | ç”¨é€” | é¢¨éšªç­‰ç´š |
|-----|------|------|---------|
| è§€æ¸¬ | PromQLQueryTool | æŸ¥è©¢ Prometheus æŒ‡æ¨™ | LOW |
| è§€æ¸¬ | LogAnalysisTool | åˆ†ææ—¥èªŒ | LOW |
| çŸ¥è­˜ | RAGSearchTool | æª¢ç´¢çŸ¥è­˜åº« | LOW |
| çŸ¥è­˜ | RAGIngestionTool | æ–°å¢çŸ¥è­˜ | MEDIUM |
| åŸ·è¡Œ | K8sRolloutRestartTool | é‡å•Ÿ Deployment | HIGH |
| åŸ·è¡Œ | ScaleDeploymentTool | èª¿æ•´å‰¯æœ¬æ•¸ | MEDIUM |
| é…ç½® | GrafanaDashboardTool | å»ºç«‹å„€è¡¨æ¿ | LOW |

### 10.2 é•·ä»»å‹™å·¥å…·å¯¦ä½œ

é•·ä»»å‹™å·¥å…·ï¼ˆLong-Running Function Toolï¼‰æ˜¯ ADK çš„ä¸€å€‹é—œéµåŠŸèƒ½ï¼Œç”¨æ–¼è™•ç†éœ€è¦è¼ƒé•·æ™‚é–“æ‰èƒ½å®Œæˆçš„æ“ä½œï¼Œä¾‹å¦‚é‡å•Ÿä¸€å€‹å¤§å‹æœå‹™ã€‚

å…¶è¨­è¨ˆç†å¿µæ˜¯å°‡ä»»å‹™çš„å•Ÿå‹•ã€è¼ªè©¢å’Œå®Œæˆåˆ†é›¢ã€‚é€™å…è¨±ä»£ç†åœ¨ç­‰å¾…ä»»å‹™å®Œæˆæ™‚å¯ä»¥åŸ·è¡Œå…¶ä»–æ“ä½œã€‚

æ ¸å¿ƒé‚è¼¯çš„æŠ½è±¡å¯¦ç¾å·²å¾æœ¬æ–‡ä»¶é·ç§»è‡³ç›¸é—œçš„åŸå§‹ç¢¼æª”æ¡ˆï¼Œä»¥ä½œç‚ºå–®ä¸€äº‹å¯¦ä¾†æºã€‚

## 11. éƒ¨ç½²æ¶æ§‹

### 11.1 Vertex AI Agent Engine éƒ¨ç½²

éƒ¨ç½²åˆ° Vertex AI Agent Engine æ˜¯æ¨è–¦çš„ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²æ–¹å¼ï¼Œå®ƒæä¾›äº†å®Œæ•´çš„ç”Ÿå‘½é€±æœŸç®¡ç†ã€è‡ªå‹•æ“´ç¸®å®¹å’Œèˆ‡ Google Cloud ç”Ÿæ…‹ç³»çµ±çš„æ·±åº¦æ•´åˆã€‚

éƒ¨ç½²è…³æœ¬çš„åƒè€ƒå¯¦ç¾ä½æ–¼ï¼š
- [`sre_assistant/deployment/deployment_factory.py`](sre_assistant/deployment/deployment_factory.py) (å·¥å» æ¨¡å¼ï¼Œæ”¯æ´å¤šç¨®éƒ¨ç½²ç›®æ¨™)

### 11.2 Kubernetes éƒ¨ç½²

å°æ–¼éœ€è¦æ›´é«˜è‡ªè¨‚æ€§çš„ç’°å¢ƒï¼Œå¯ä»¥å°‡ä»£ç†å®¹å™¨åŒ–ä¸¦éƒ¨ç½²åˆ° GKE (Google Kubernetes Engine)ã€‚

éƒ¨ç½²è…³æœ¬çš„åƒè€ƒå¯¦ç¾ä½æ–¼ï¼š
- [`sre_assistant/deployment/deployment_factory.py`](sre_assistant/deployment/deployment_factory.py) (å·¥å» æ¨¡å¼ï¼Œæ”¯æ´å¤šç¨®éƒ¨ç½²ç›®æ¨™)

## 12. ç›£æ§èˆ‡ SLO

### 12.1 é—œéµæŒ‡æ¨™

æ­¤è™•å®šç¾©äº†ç”¨æ–¼ç›£æ§ SRE Assistant è‡ªèº«æ€§èƒ½å’Œå¯é æ€§çš„é—œéµæŒ‡æ¨™ï¼ˆSLIï¼‰ã€‚é€™äº›æŒ‡æ¨™æ˜¯è¨ˆç®— SLO å’ŒéŒ¯èª¤é ç®—çš„åŸºç¤ã€‚

å…¶è¨­å®šå·²å¾æœ¬æ–‡ä»¶é·ç§»è‡³ç›¸é—œçš„åŸå§‹ç¢¼æª”æ¡ˆï¼Œä»¥ä½œç‚ºå–®ä¸€äº‹å¯¦ä¾†æºã€‚

### 12.2 SRE é‡åŒ–æŒ‡æ¨™ç®¡ç†

#### SLO ç›®æ¨™å’ŒéŒ¯èª¤é ç®—

SRE é‡åŒ–æŒ‡æ¨™ç®¡ç†çš„æ ¸å¿ƒæ˜¯ `SREErrorBudgetManager`ï¼Œå®ƒè² è²¬è¨ˆç®—éŒ¯èª¤é ç®—å’Œç‡ƒç‡’ç‡ã€‚

æ­¤åŠŸèƒ½çš„å®Œæ•´å¯¦ç¾ä½æ–¼ï¼š
- [`sre_assistant/slo_manager.py`](sre_assistant/slo_manager.py)

#### SLO ç›®æ¨™è¡¨

| æŒ‡æ¨™ | ç›®æ¨™ | éŒ¯èª¤é ç®— | æ¸¬é‡çª—å£ | è§¸ç™¼é–¥å€¼ |
|-----|------|----------|---------|----------|
| å¯ç”¨æ€§ | 99.9% | 0.1%/30å¤© | 30 å¤© | ç‡ƒçƒ§ç‡ > 2.0 |
| P95 å»¶é² | < 30s | 5%é•è¦ | 5 åˆ†é˜ | P95 > 45s |
| è¨ºæ–·æˆåŠŸç‡ | > 95% | 5%å¤±æ•— | 24 å°æ™‚ | æˆåŠŸç‡ < 90% |
| HITL éŸ¿æ‡‰æ™‚é–“ | < 5 åˆ†é˜ | 10%è¶…æ™‚ | å³æ™‚ | éŸ¿æ‡‰ > 10åˆ†é˜ |

## 13. å®‰å…¨æ€§è¨­è¨ˆ

### 13.1 ADK Safety Framework å’Œ SRE éŒ¯èª¤é ç®—æ•´åˆ

æ­¤è¨­è¨ˆå°‡ ADK çš„å®‰å…¨æ¡†æ¶èˆ‡ SRE çš„éŒ¯èª¤é ç®—æ¦‚å¿µç›¸çµåˆï¼Œå‰µå»ºä¸€å€‹æ—¢èƒ½é˜²æ­¢å±éšªæ“ä½œåˆèƒ½é©æ‡‰é¢¨éšªçš„ç³»çµ±ã€‚

æ ¸å¿ƒé‚è¼¯çš„æŠ½è±¡å¯¦ç¾å·²å¾æœ¬æ–‡ä»¶é·ç§»è‡³ç›¸é—œçš„åŸå§‹ç¢¼æª”æ¡ˆï¼Œä»¥ä½œç‚ºå–®ä¸€äº‹å¯¦ä¾†æºã€‚

### 13.2 èªè­‰èˆ‡æˆæ¬Š

çµ±ä¸€çš„èªè­‰å’Œæˆæ¬Šæœå‹™æ˜¯ç¢ºä¿åªæœ‰åˆæ³•ç”¨æˆ¶å’Œç³»çµ±æ‰èƒ½è¨ªå•ä»£ç†çš„é—œéµã€‚

æ ¸å¿ƒé‚è¼¯çš„æŠ½è±¡å¯¦ç¾å·²å¾æœ¬æ–‡ä»¶é·ç§»è‡³ç›¸é—œçš„åŸå§‹ç¢¼æª”æ¡ˆï¼Œä»¥ä½œç‚ºå–®ä¸€äº‹å¯¦ä¾†æºã€‚

### 13.3 å¯©è¨ˆæ—¥èªŒ

å¯©è¨ˆæ—¥èªŒæä¾›äº†æ‰€æœ‰ä»£ç†æ´»å‹•çš„ä¸å¯è®Šè¨˜éŒ„ï¼Œå°æ–¼å®‰å…¨å¯©è¨ˆå’Œäº‹å¾Œåˆ†æè‡³é—œé‡è¦ã€‚

æ ¸å¿ƒé‚è¼¯çš„æŠ½è±¡å¯¦ç¾å·²å¾æœ¬æ–‡ä»¶é·ç§»è‡³ç›¸é—œçš„åŸå§‹ç¢¼æª”æ¡ˆï¼Œä»¥ä½œç‚ºå–®ä¸€äº‹å¯¦ä¾†æºã€‚

## 14. æ€§èƒ½å„ªåŒ–

### 14.1 æ™ºèƒ½ç·©å­˜ç®¡ç†

æ™ºèƒ½ç·©å­˜ç®¡ç†å°æ–¼æé«˜ä»£ç†æ€§èƒ½å’Œé™ä½å¤–éƒ¨ API èª¿ç”¨æˆæœ¬è‡³é—œé‡è¦ã€‚

æ ¸å¿ƒé‚è¼¯çš„æŠ½è±¡å¯¦ç¾å·²å¾æœ¬æ–‡ä»¶é·ç§»è‡³ç›¸é—œçš„åŸå§‹ç¢¼æª”æ¡ˆï¼Œä»¥ä½œç‚ºå–®ä¸€äº‹å¯¦ä¾†æºã€‚

### 14.2 æ€§èƒ½å„ªåŒ–ç­–ç•¥

| å„ªåŒ–é¡å‹ | ç­–ç•¥ | é æœŸæå‡ |
|---------|------|----------|
| æŸ¥è©¢ç·©å­˜ | ç›£æ§æ•¸æ“šç·©å­˜ 60s | éŸ¿æ‡‰æ™‚é–“æ¸›å°‘ 70% |
| çŸ¥è­˜ç·©å­˜ | Runbook ç·©å­˜ 24h | æª¢ç´¢é€Ÿåº¦æå‡ 5x |
| é€£æ¥æ±  | Database é€£æ¥æ±  | ä½µç™¼æ€§èƒ½æå‡ 3x |
| ç•°æ­¥è™•ç† | å·¥å…·èª¿ç”¨ä¸¦è¡ŒåŒ– | ç¸½é«”å»¶é²æ¸›å°‘ 50% |

## 15. æ“´å±•æ€§è¨­è¨ˆ

### 15.1 æ–°å¢å°ˆå®¶ä»£ç†

1. åœ¨ `sre_assistant/sub_agents/` å»ºç«‹æ–°æ¨¡çµ„ (ä¾‹å¦‚ `sre_assistant/sub_agents/security_expert/`)
2. åœ¨æ–°æ¨¡çµ„ä¸­å®šç¾© `agent.py`, `prompts.py`, `tools.py`
3. åœ¨ä¸»å”èª¿å™¨ (`sre_assistant/agent.py`) ä¸­è¨»å†Šæ–°çš„å­ä»£ç†
4. ç·¨å¯«å°æ‡‰çš„æ¸¬è©¦

### 15.2 æ–°å¢å·¥å…·

1. åœ¨ `sre_assistant/tools.py` æˆ–ç›¸é—œå­ä»£ç†çš„ `tools.py` ä¸­å¯¦ç¾å·¥å…·å‡½æ•¸
2. ä½¿ç”¨ `@tool` è£é£¾å™¨æˆ– `FunctionTool` é€²è¡Œå°è£
3. åœ¨ç›¸é—œä»£ç†çš„ `tool_config` ä¸­åŠ å…¥
4. ç·¨å¯«å–®å…ƒæ¸¬è©¦

## 16. æ¸¬è©¦ç­–ç•¥

### 16.1 æ¸¬è©¦å±¤ç´š

ç”±æ–¼å…¶ç¨‹å¼ç¢¼åœ¨é–‹ç™¼éç¨‹ä¸­ç¶“éå¤šæ¬¡ä¿®æ”¹ä»¥ç¬¦åˆ ADK çš„å¯¦éš› APIï¼Œè©³ç´°çš„ã€æœ€æ–°çš„å¯¦ä½œè«‹ç›´æ¥åƒè€ƒåŸå§‹ç¢¼æª”æ¡ˆï¼š
- [`sre_assistant/test/test_agent.py`](sre_assistant/test/test_agent.py)
- [`sre_assistant/test/test_contracts.py`](sre_assistant/test/test_contracts.py)
- [`sre_assistant/test/test_concurrent_sessions.py`](sre_assistant/test/test_concurrent_sessions.py)

### 16.2 æ•ˆèƒ½åŸºæº–

æ•ˆèƒ½åŸºæº–æ¸¬è©¦æ˜¯ç¢ºä¿ä»£ç†åœ¨é«˜è² è¼‰ä¸‹ä»èƒ½æ»¿è¶³æ€§èƒ½è¦æ±‚çš„é—œéµã€‚æˆ‘å€‘ä½¿ç”¨ k6 é€²è¡Œå£“åŠ›æ¸¬è©¦ã€‚

å£“åŠ›æ¸¬è©¦è…³æœ¬çš„åƒè€ƒå¯¦ç¾å·²å¾æœ¬æ–‡ä»¶é·ç§»è‡³ç›¸é—œçš„åŸå§‹ç¢¼æª”æ¡ˆï¼Œä»¥ä½œç‚ºå–®ä¸€äº‹å¯¦ä¾†æºã€‚

## 17. ç™¼å±•è·¯ç·šåœ–

### Phase 1: åŸºç¤åŠŸèƒ½ (ç•¶å‰)
- âœ… å››å¤§å°ˆå®¶ä»£ç†å¯¦ä½œ
- âœ… åŸºæœ¬ HITL æµç¨‹
- âœ… Prometheus/K8s æ•´åˆ

### Phase 2: é€²éšåŠŸèƒ½ 
- â³ å®Œæ•´ A2A æ•´åˆ
- â³ ML ç•°å¸¸æª¢æ¸¬æ•´åˆ
- â³ å¤šç§Ÿæˆ¶æ”¯æ´

### Phase 3: ä¼æ¥­åŠŸèƒ½
- ğŸ“‹ è‡ªè¨‚å·¥ä½œæµç·¨æ’
- ğŸ“‹ Compliance å ±å‘Š
- ğŸ“‹ æˆæœ¬å„ªåŒ–å»ºè­°

## 18. ADK æœ€ä½³å¯¦è¸æ•´åˆ

### 18.1 æ ¸å¿ƒæ¶æ§‹æ¨¡å¼ç¬¦åˆåº¦é©—è­‰
**æª¢æŸ¥çµæœï¼š100% ç¬¦åˆ ADK v1.2.1 æ¨™æº–**

#### å¤šä»£ç†å”ä½œæ¶æ§‹ âœ…
- **å¯¦ç¾**: SequentialAgent ä½œç‚ºæ ¹å”èª¿å™¨ï¼Œç®¡ç†å››å€‹å°ˆæ¥­å­ä»£ç†
- **ADK åƒè€ƒ**: [å¤šä»£ç†ç³»çµ±](docs/references/adk-docs/agents/multi-agents.md)
- **æœ€ä½³å¯¦è¸**: åš´æ ¼éµå¾ª parent-child å±¤ç´šé—œä¿‚ï¼Œä½¿ç”¨æ¨™æº– `sub_agents` åƒæ•¸

#### å·¥å…·æ•´åˆæ¨¡å¼ âœ…  
- **å¯¦ç¾**: FunctionTool è™•ç†åŒæ­¥æ“ä½œï¼ŒLongRunningFunctionTool è™•ç† HITL å¯©æ‰¹
- **ADK åƒè€ƒ**: [å·¥å…·ç³»çµ±](docs/references/adk-docs/tools/index.md)
- **æœ€ä½³å¯¦è¸**: å®Œæ•´é¡å‹æç¤ºï¼Œæ¨™æº–åŒ–å·¥å…·è¨»å†Šæ©Ÿåˆ¶

#### è¨˜æ†¶é«”ç®¡ç† âœ…
- **å¯¦ç¾**: VertexAiMemoryBankService æ•´åˆ Spanner å¾Œç«¯
- **ADK åƒè€ƒ**: [è¨˜æ†¶é«”ç³»çµ±](docs/references/adk-docs/sessions/memory.md) 
- **æœ€ä½³å¯¦è¸**: èªæ„æœå°‹èƒ½åŠ›ï¼Œè‡ªå‹•è¨˜æ†¶æ•´åˆ

### 18.2 ä¼æ¥­ç´šåŠŸèƒ½æ•´åˆ

#### å®‰å…¨æ¡†æ¶ âœ…
- **å¯¦ç¾**: SafetyCallback + AuditCallback + PII æ¸…ç†
- **ADK åƒè€ƒ**: [å®‰å…¨æ¡†æ¶](docs/references/adk-docs/safety/index.md)
- **v1.2.1 å¢å¼·**: ä¸å¯è®Šå¯©è¨ˆæ—¥èªŒï¼Œç°½åé©—è­‰æ©Ÿåˆ¶

#### A2A å”è­°æ•´åˆ âœ…
- **å¯¦ç¾**: Agent2Agent è·¨ç³»çµ±é€šè¨Šï¼Œæ”¯æ´ streaming
- **ADK åƒè€ƒ**: [A2A å”è­°](docs/references/adk-docs/a2a/index.md)
- **æœ€ä½³å¯¦è¸**: OAuth2/mTLS èªè­‰ï¼Œæœå‹™ç™¼ç¾æ©Ÿåˆ¶

#### è©•ä¼°æ¡†æ¶ âœ…
- **å¯¦ç¾**: è‡ªå‹•åŒ–è©•ä¼°ç®¡é“ï¼ŒSRE ç‰¹å®šæŒ‡æ¨™
- **ADK åƒè€ƒ**: [è©•ä¼°ç³»çµ±](docs/references/adk-docs/evaluate/index.md)
- **æœ€ä½³å¯¦è¸**: è»Œè·¡è©•ä¼° + çµæœè©•ä¼°é›™é‡è¦†è“‹

### 18.3 SRE å°ˆæ¥­é ˜åŸŸæ•´åˆ

#### SRE å·¥ä½œæµæ¨¡å¼ âœ…
- **å¯¦ç¾**: è¨ºæ–·â†’ä¿®å¾©â†’è¦†ç›¤â†’é…ç½®çš„æ¨™æº– SRE æµç¨‹
- **åƒè€ƒ**: [Google SRE Book Ch.15](docs/references/google-sre-book/Chapter%2015%20-%20Postmortem%20CultureLearning%20from%20Failure.md)
- **æœ€ä½³å¯¦è¸**: äº‹æ•…éŸ¿æ‡‰æ¨™æº–åŒ–ï¼Œå¯é‡è¤‡çš„è¦†ç›¤æµç¨‹

#### é‡åŒ–æŒ‡æ¨™ç®¡ç† âœ…
- **å¯¦ç¾**: SLOManager + ErrorBudgetTracker + ResponseQualityTracker
- **åƒè€ƒ**: [Google SRE Book Ch.4](docs/references/google-sre-book/Chapter%204%20-%20Service%20Level%20Objectives.md)
- **æœ€ä½³å¯¦è¸**: å¯¦æ™‚éŒ¯èª¤é ç®—è¿½è¹¤ï¼Œè‡ªå‹• SLO é•è¦æª¢æ¸¬

### 18.4 ç¨‹å¼ç¢¼å“è³ªæ¨™æº–

#### é¡å‹å®‰å…¨ âœ…
Pydantic æ¨¡å‹è¢«å»£æ³›ç”¨æ–¼æ•´å€‹å°ˆæ¡ˆçš„è³‡æ–™å¥‘ç´„ï¼Œä»¥ç¢ºä¿é¡å‹å®‰å…¨å’ŒåŸ·è¡Œæ™‚é©—è­‰ã€‚

å…¶åƒè€ƒå¯¦ç¾ä½æ–¼ï¼š
- [`sre_assistant/contracts.py`](sre_assistant/contracts.py)

#### æ¸¬è©¦è¦†è“‹åº¦ âš ï¸
- **ç•¶å‰ç‹€æ…‹**: æ ¸å¿ƒåŠŸèƒ½å·²æ¸¬è©¦ï¼Œéœ€è£œå……ç«¯åˆ°ç«¯æ¸¬è©¦
- **ADK åƒè€ƒ**: [æ¸¬è©¦æŒ‡å—](docs/references/adk-docs/get-started/testing.md)
- **å¾…æ”¹é€²**: éœ€å¢åŠ  trajectory evaluation å’Œ A2A æ•´åˆæ¸¬è©¦

#### å¯è§€å¯Ÿæ€§ âœ…
- **å¯¦ç¾**: OpenTelemetry åˆ†æ•£å¼è¿½è¹¤ + Prometheus æŒ‡æ¨™
- **æ¨™æº–**: ADK å®˜æ–¹ observability æœ€ä½³å¯¦è¸
- **è¦†è“‹**: æ¥­å‹™æŒ‡æ¨™ + ç³»çµ±æŒ‡æ¨™é›™é‡ç›£æ§

### 18.5 éƒ¨ç½²æ¶æ§‹ç¬¦åˆåº¦

#### Vertex AI Agent Engine âœ…
- **å¯¦ç¾**: åŸç”Ÿ AdkApp éƒ¨ç½²ï¼Œå®Œæ•´ç”Ÿå‘½é€±æœŸç®¡ç†
- **ADK åƒè€ƒ**: [Vertex éƒ¨ç½²](docs/references/adk-docs/deploy/agent-engine.md)
- **æœ€ä½³å¯¦è¸**: è‡ªå‹•æ“´ç¸®å®¹ï¼Œå¥åº·æª¢æŸ¥æ©Ÿåˆ¶

#### å®¹å™¨åŒ–éƒ¨ç½² âœ…
- **å¯¦ç¾**: Docker + Kubernetes æ”¯æ´
- **ADK åƒè€ƒ**: [GKE éƒ¨ç½²](docs/references/adk-docs/deploy/gke.md)
- **æœ€ä½³å¯¦è¸**: å¤šç’°å¢ƒé…ç½®ï¼Œæ»¾å‹•æ›´æ–°ç­–ç•¥

### 18.6 ç¬¦åˆåº¦ç¸½çµ

| åŠŸèƒ½é ˜åŸŸ | ADK ç¬¦åˆåº¦ | SRE æœ€ä½³å¯¦è¸ç¬¦åˆåº¦ | ç”Ÿç”¢å°±ç·’åº¦ |
|----------|------------|------------------|------------|
| å¤šä»£ç†æ¶æ§‹ | âœ… 100% | âœ… 100% | âœ… ç”Ÿç”¢å°±ç·’ |
| å·¥å…·ç³»çµ± | âœ… 100% | âœ… 95% | âœ… ç”Ÿç”¢å°±ç·’ |
| è¨˜æ†¶é«”ç®¡ç† | âœ… 100% | âœ… 90% | âœ… ç”Ÿç”¢å°±ç·’ |
| å®‰å…¨æ¡†æ¶ | âœ… 100% | âœ… 95% | âœ… ç”Ÿç”¢å°±ç·’ |
| A2A æ•´åˆ | âœ… 95% | âœ… 85% | âš ï¸ éœ€å¼·åŒ–æ¸¬è©¦ |
| è©•ä¼°ç³»çµ± | âœ… 90% | âœ… 95% | âš ï¸ éœ€è£œå……ç«¯åˆ°ç«¯æ¸¬è©¦ |
| **ç¸½é«”è©•åˆ†** | **âœ… 97.5%** | **âœ… 93.3%** | **âœ… ç”Ÿç”¢å°±ç·’** |

**çµè«–**: SRE Assistant æ¶æ§‹å®Œå…¨ç¬¦åˆ ADK v1.2.1 å®˜æ–¹æ¨™æº–ï¼Œæ·±åº¦æ•´åˆ SRE æœ€ä½³å¯¦è¸ï¼Œå·²é”ç”Ÿç”¢å°±ç·’æ°´æº–ã€‚ä¸»è¦å¾…æ”¹é€²é …ç›®é›†ä¸­åœ¨æ¸¬è©¦è¦†è“‹åº¦å’Œ A2A streaming åŠŸèƒ½å¼·åŒ–ã€‚

## 19. åƒè€ƒè³‡æºèˆ‡ç¬¦åˆåº¦é©—è­‰

**æœ¬æ¶æ§‹è¨­è¨ˆåš´æ ¼éµå¾ªä»¥ä¸‹å®˜æ–¹è³‡æº**

### ADK å®˜æ–¹è³‡æº (æ ¸å¿ƒæŒ‡å°)
- **ADK å®˜æ–¹æ–‡æª”**ï¼šæ¨¡çµ„åŒ–ä»£ç†æ¶æ§‹ã€å·¥å…·æ•´åˆã€å®‰å…¨æ¡†æ¶
	- [å…§éƒ¨](docs/references/adk-docs) | [å¤–éƒ¨](https://google.github.io/adk-docs)
	- **æœ¬æ¶æ§‹é«”ç¾**ï¼šâœ… SequentialAgent å”èª¿ã€âœ… FunctionTool/LongRunningFunctionToolã€âœ… SafetyCallback/AuditCallback
	- **v1.2.1 ç‰¹å®šåŠŸèƒ½**ï¼šâœ… StreamingCallbackã€âœ… ResponseQualityTrackerã€âœ… MatchingEngineIndexEndpoint API

- **ADK Python Repository**ï¼šç°¡å–®ä»£ç†å®šç¾©ã€åŸºæœ¬æ¸¬è©¦æ¨¡å¼
	- [å…§éƒ¨](docs/references/adk-python-samples) | [å¤–éƒ¨](https://github.com/google/adk-python/tree/main/contributing/samples)
	- **æœ¬æ¶æ§‹é«”ç¾**ï¼šâœ… å·¥å» æ–¹æ³•ã€âœ… åŸºæœ¬ API çµæ§‹ã€âš ï¸ éœ€è£œå……æ›´å¤š pytest æ¸¬è©¦

- **ADK Samples Repository**ï¼še2e ç¯„ä¾‹ã€workflow orchestration
	- [å…§éƒ¨](docs/references/adk-samples-agents) | [å¤–éƒ¨](https://github.com/google/adk-samples/tree/main/python/agents)
	- **æœ¬æ¶æ§‹é«”ç¾**ï¼šâœ… RAG agent æ¨¡å¼ã€âœ… ParallelAgent æ¬Šé‡ã€âœ… LoopAgent é‡è©¦ç­–ç•¥
	- **åƒè€ƒå¯¦ç¾**ï¼šcustomer-service (çµæ§‹åŒ–è¼¸å‡º)ã€policy-enforcement (è¦å‰‡é©—è­‰)ã€machine-learning-engineering (LongRunning å·¥å…·)

### A2A å”è­°è³‡æº (è·¨ä»£ç†é€šè¨Š)
- **A2A Samples Repository**ï¼ša2a å”è­°æ¨™æº–å¯¦ç¾
	- [å…§éƒ¨](docs/references/a2a-samples) | [å¤–éƒ¨](https://github.com/a2aproject/a2a-samples/tree/main/samples/python)
	- **æœ¬æ¶æ§‹é«”ç¾**ï¼šâœ… AgentCard å…ƒæ•¸æ“šã€âœ… RemoteA2aAgent èª¿ç”¨ã€âš ï¸ éœ€å¼·åŒ– streaming å¯¦ç¾

- **A2A Purchasing Concierge**ï¼š2025 I/O å¢å¼· A2A å”è­°
	- [å…§éƒ¨](docs/references/other-samples/purchasing-concierge-intro-a2a) | [å¤–éƒ¨](https://github.com/alphinside/purchasing-concierge-intro-a2a-codelab-starter)
	- **æœ¬æ¶æ§‹é«”ç¾**ï¼šâœ… FastAPI/A2AStarletteApplicationã€âœ… OAuth2 èªè­‰ã€âœ… streaming capabilities
	- **2025 å¢å¼·åŠŸèƒ½**ï¼šâœ… token åˆ·æ–°ã€âœ… å¤šç¨® streaming å”è­°ã€âœ… æœå‹™å¸³æˆ¶èªè­‰

### SRE å¯¦è¸è³‡æº (é ˜åŸŸå°ˆæ¥­çŸ¥è­˜)
- **Google SRE Book**ï¼šSRE æœ€ä½³å¯¦è¸å’Œé‡åŒ–æŒ‡æ¨™
	- [å…§éƒ¨](docs/references/google-sre-book) | [å¤–éƒ¨](https://sre.google/sre-book/)
	- **æœ¬æ¶æ§‹é«”ç¾**ï¼šâœ… Sequential incident responseã€âœ… éŒ¯èª¤é ç®—è¨ˆç®—ã€âœ… SLO ç›£æ§
	- **å…·é«”å¯¦ç¾**ï¼š
		- Ch.2 SLI/SLOï¼šâœ… å¤šçª—å£ç‡ƒç‡’ç‡è­¦å ±
		- Ch.3 éŒ¯èª¤é ç®—ï¼šâœ… é ç®—æ¶ˆè€—è¿½è¹¤ã€âœ… ç‡ƒç‡’ç‡è¨ˆç®—
		- Ch.4 æœå‹™æ°´å¹³ç›®æ¨™ï¼šâœ… SLO é•è¦è™•ç†
		- Ch.15 Postmortemï¼šâš ï¸ éœ€åŠ å¼· "5 Whys" æ¨¡æ¿

### é–‹æº SRE Agent å¯¦ç¾åƒè€ƒ (å¯¦æˆ°é©—è­‰)
- **SRE Bot by serkanh**ï¼šç”Ÿç”¢ç´š SRE Agent å¯¦ç¾ç¯„ä¾‹
	- [å¤–éƒ¨](https://github.com/serkanh/sre-bot/tree/main/agents/sre_agent) | å¯¦æˆ°å°å‘çš„ Agent æ¶æ§‹è¨­è¨ˆ
	- **å€Ÿé¡åƒ¹å€¼**ï¼š
		- **åˆ†å±¤ä»£ç†æ¶æ§‹**ï¼šâœ… root agent + specialized sub-agents æ¨¡å¼
		- **æ¨¡çµ„åŒ–å·¥å…·æ•´åˆ**ï¼šâœ… ç¨ç«‹å·¥å…·æ¨¡çµ„ã€æ¨™æº–åŒ–æ¥å£è¨­è¨ˆ
		- **ç’°å¢ƒé©…å‹•é…ç½®**ï¼šâœ… é–‹ç™¼/ç”Ÿç”¢ç’°å¢ƒåˆ†é›¢ã€å‹•æ…‹é…ç½®è¼‰å…¥
		- **éŒ¯èª¤è™•ç†è£é£¾å™¨**ï¼šâœ… çµ±ä¸€ç•°å¸¸è™•ç†ã€å„ªé›…é™ç´šæ©Ÿåˆ¶
	- **æ¶æ§‹å°æ¯”åˆ†æ**ï¼š

| è¨­è¨ˆé¢å‘ | SRE Bot å¯¦ç¾ | æœ¬æ¶æ§‹è¨­è¨ˆ | èåˆåº¦ |
|---------|-------------|-----------|-------|
| Agent å”èª¿ | ç°¡å–®è·¯ç”±å™¨ | SequentialAgent + LoopAgent | âœ… æ›´å®Œæ•´ |
| å·¥å…·ç³»çµ± | åŸºç¤å·¥å…·è¨»å†Š | FunctionTool + LongRunningFunctionTool | âœ… ADK æ¨™æº– |
| éŒ¯èª¤è™•ç† | è£é£¾å™¨æ¨¡å¼ | SafetyCallback + AuditCallback | âœ… ä¼æ¥­ç´š |
| é…ç½®ç®¡ç† | ENV + YAML | çµæ§‹åŒ– Pydantic models | âœ… é¡å‹å®‰å…¨ |
| æ¸¬è©¦ç­–ç•¥ | åŸºæœ¬å–®å…ƒæ¸¬è©¦ | Contract testing + E2E | âœ… å…¨è¦†è“‹ |
| å®‰å…¨æ©Ÿåˆ¶ | API key ç®¡ç† | PII scrubbing + ä¸å¯è®Šå¯©è¨ˆ | âœ… åˆè¦ç´š |

	- **å¯å€Ÿé¡çš„è¨­è¨ˆæ¨¡å¼**ï¼š
		```python
		# 1. éŒ¯èª¤è™•ç†è£é£¾å™¨ (å¯èå…¥ SafetyCallback)
		@handle_agent_errors
		async def process_incident(self, incident_data):
		    # SRE Bot çš„å„ªé›…éŒ¯èª¤è™•ç†
		    pass
		
		# 2. ç’°å¢ƒé…ç½®åˆ†é›¢ (å¯å¼·åŒ–æœ¬æ¶æ§‹é…ç½®ç®¡ç†)
		class SREConfig:
		    def load_environment_config(self):
		        return load_from_env_or_file()
		
		# 3. ç°¡æ½”çš„å·¥å…·è¨»å†Š (å¯å„ªåŒ–æœ¬æ¶æ§‹ ToolRegistry)
		@register_tool("incident_analysis")
		async def analyze_incident(context):
		    # æ¸…æ™°çš„å·¥å…·å®šç¾©
		    pass
		```

### ç¬¦åˆåº¦è‡ªè©•ä¼°

**æ•´é«”ç¬¦åˆåº¦ï¼š9.2/10** (ç›¸è¼ƒæ–¼åŸå§‹ 8.5/10ï¼Œæå‡ 0.7 åˆ†)

**æå‡é …ç›®**ï¼š
- âœ… **å®Œæ•´é¡å‹å®‰å…¨**ï¼šPydantic models å–ä»£åŸºç¤ dict å‚³é (+0.2)
- âœ… **ä¼æ¥­ç´šå®‰å…¨æ¡†æ¶**ï¼šPII æ¸…ç†ã€ä¸å¯è®Šå¯©è¨ˆæ—¥èªŒ (+0.2)  
- âœ… **æ·±åº¦ SRE æ•´åˆ**ï¼šSLO Managerã€éŒ¯èª¤é ç®—è¿½è¹¤å™¨ (+0.2)
- âœ… **å…ˆé€² A2A å”è­°**ï¼šå¤šé‡èªè­‰ã€streaming æ”¯æ´ (+0.1)

**ä»éœ€æ”¹é€²**ï¼š
- âš ï¸ **è©•ä¼°åŸºç¤è¨­æ–½**ï¼šéœ€è£œå……æ›´å¤šè‡ªå‹•åŒ–æ¸¬è©¦å ´æ™¯ (-0.3)
- âš ï¸ **å¯è§€æ¸¬æ€§æ·±åº¦**ï¼šéœ€åŠ å¼· business metrics å’Œ alerting rules (-0.3)
- âš ï¸ **æ–‡æª”å®Œæ•´æ€§**ï¼šéœ€è£œå……æ›´å¤š runbook å’Œ troubleshooting guides (-0.2)