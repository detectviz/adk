# ç³»çµ±æ¶æ§‹æ–‡æª”

> **æ–‡æª”è·è²¬**ï¼šå®šç¾© SRE Assistant çš„ç³»çµ±æ¶æ§‹ã€è¨­è¨ˆæ±ºç­–ã€AI Agent æ¶æ§‹å’Œé–‹ç™¼æŒ‡å°åŸå‰‡
> **ç‰ˆæœ¬**ï¼š1.0.0
> **æœ€å¾Œæ›´æ–°**ï¼š2025-08-20

## æ–‡æª”å®šä½

- **ç›®æ¨™å—çœ¾**ï¼šæ¶æ§‹å¸«ã€AIå·¥ç¨‹å¸«ã€é–‹ç™¼è€…ã€æŠ€è¡“è² è²¬äºº
- **æ›´æ–°é »ç‡**ï¼šå­£åº¦è©•å¯©ï¼Œé‡å¤§æ¶æ§‹è®Šæ›´æ™‚æ›´æ–°

## æ–‡æª”é—œä¿‚

```bash
README.md â†’ AGENT.md â†’ [ARCHITECTURE.md] â†’ SPEC.md â†’ TASKS.md
```

**ç›¸é—œæ–‡æª”**ï¼š
- **å‰ç½®é–±è®€**ï¼š[README.md - å°ˆæ¡ˆæ¦‚è¦½](README.md#å°ˆæ¡ˆæ¦‚è¦½)
- **æŠ€è¡“è¦æ ¼**ï¼š[SPEC.md - æŠ€è¡“å¯¦ä½œè¦æ ¼](SPEC.md#æŠ€è¡“æ£§èˆ‡ä¾è³´)
- **å”ä½œæŒ‡å—**ï¼š[AGENT.md - AIå”ä½œæŒ‡å—](AGENT.md#aiå”ä½œåŸå‰‡)

---

## ç³»çµ±æ¶æ§‹è¨­è¨ˆ

### æ ¸å¿ƒè¨­è¨ˆåŸå‰‡

1. **åŠ©ç†å„ªå…ˆ (Assistant-First)**: æ‰€æœ‰å¹³å°èƒ½åŠ›éƒ½å¿…é ˆé€éä¸€å€‹çµ±ä¸€çš„ã€å°è©±å¼çš„ SREAssistant æš´éœ²çµ¦ä½¿ç”¨è€…ã€‚ä½¿ç”¨è€…ç„¡éœ€èˆ‡å¾Œç«¯ç³»çµ±ç›´æ¥äº’å‹•ã€‚  
2. **å°ˆå®¶è§£è€¦ (Decoupled Expertise)**: å¹³å°çš„æ ¸å¿ƒæ˜¯ä¸€å€‹è¼•é‡ç´šçš„å”èª¿å™¨ã€‚æ‰€æœ‰å…·é«”çš„æ¥­å‹™é‚è¼¯ï¼ˆå¦‚è¨ºæ–·ã€é…ç½®ï¼‰éƒ½å¿…é ˆè¢«å°è£åœ¨ç¨ç«‹ã€å¯æ’æ‹”çš„ã€Œå°ˆå®¶ Agentã€ä¸­ã€‚  
3. **å¥‘ç´„é©…å‹• (Contract-Driven)**: å¹³å°æ ¸å¿ƒèˆ‡ Agent åŸ·è¡Œç’°å¢ƒä¹‹é–“çš„é€šè¨Šï¼Œå¿…é ˆé€éä¸€ä»½æœ€å°åŒ–ä¸”æ¥µåº¦ç©©å®šçš„ gRPC å¥‘ç´„ä¾†å®šç¾©ã€‚  
4. **çŸ¥è­˜é–‰ç’° (Knowledge Loop)**: å¹³å°å¿…é ˆå…§å»ºä¸€å€‹æ ¸å¿ƒçš„çŸ¥è­˜åº«æœå‹™ã€‚æ‰€æœ‰ Agent çš„è¡Œå‹•å’Œæˆæœéƒ½æ‡‰è¢«è¨˜éŒ„ã€å­¸ç¿’ï¼Œä¸¦åå“ºæœªä¾†çš„æ±ºç­–ã€‚  
5. **é–‹ç™¼è€…é«”é©—è‡³ä¸Š (DX First)**: Agent çš„é–‹ç™¼æ¡†æ¶ (ADK) å¿…é ˆæ¥µåº¦ç°¡æ½”ï¼Œå°‡æ‰€æœ‰åº•å±¤è¤‡é›œæ€§ï¼ˆé€šè¨Šã€ç‹€æ…‹ç®¡ç†ï¼‰å®Œå…¨æŠ½è±¡ï¼Œè®“é–‹ç™¼è€…èƒ½å°ˆæ³¨æ–¼å‰µé€ åƒ¹å€¼ã€‚

### ç³»çµ±æ¶æ§‹

å¹³å°ç”±ä¸‰å€‹ä¸»è¦éƒ¨åˆ†æ§‹æˆï¼š

1. **å”èª¿æ ¸å¿ƒ (Orchestration Core)**:  
   * **èªè¨€**: Go  
   * **è·è²¬**: ç©©å®šæ€§ã€å®‰å…¨æ€§ã€è³‡æºç®¡ç†ã€‚ä½œç‚ºå¹³å°çš„ã€Œä½œæ¥­ç³»çµ±ã€ã€‚  
2. **Agent åŸ·è¡Œç’°å¢ƒ (Agent Runtime)**:  
   * **èªè¨€**: Python  
   * **è·è²¬**: æ•æ·æ€§ã€æ™ºæ…§é‚è¼¯ã€å¿«é€Ÿè¿­ä»£ã€‚ä½œç‚º Agent çš„ã€Œå¤§è…¦å’Œèº«é«”ã€ã€‚  
3. **é€šè¨Šå¥‘ç´„ (Communication Contract)**:  
   * **æŠ€è¡“**: gRPC / Protobuf  
   * **è·è²¬**: å®šç¾©å…©è€…ä¹‹é–“æ¸…æ™°ã€é«˜æ•ˆçš„é€šè¨Šé‚Šç•Œã€‚

# å°ˆæ¡ˆç›®éŒ„çµæ§‹

```bash
sre-assistant/
â”œâ”€â”€ contracts/              # ğŸ”¥ å¥‘ç´„å±¤ï¼ˆèªè¨€ç„¡é—œï¼‰
â”‚   â”œâ”€â”€ proto/             # gRPC å®šç¾©
â”‚   â””â”€â”€ schemas/           # JSON Schema
â”‚
â”œâ”€â”€ core/                  # ğŸ”¥ Go å”èª¿æ ¸å¿ƒ
â”‚   â”œâ”€â”€ cmd/               # å•Ÿå‹•å…¥å£
â”‚   â”œâ”€â”€ internal/          # å…§éƒ¨å¯¦ç¾
â”‚   â”‚   â”œâ”€â”€ orchestrator/ # å”èª¿å™¨
â”‚   â”‚   â”œâ”€â”€ bridge/       # Tool Bridge
â”‚   â”‚   â””â”€â”€ security/     # å®‰å…¨ç®¡ç†
â”‚   â””â”€â”€ tools/             # Shell å·¥å…·è…³æœ¬
â”‚       â”œâ”€â”€ diagnostic/    # è¨ºæ–·è…³æœ¬
â”‚       â”œâ”€â”€ config/        # é…ç½®è…³æœ¬
â”‚       â””â”€â”€ remediation/   # ä¿®å¾©è…³æœ¬
â”‚
â”œâ”€â”€ agents/                # ğŸ”¥ Python Agent å±¤
â”‚   â”œâ”€â”€ sre_assistant/    # ä¸»åŠ©ç†
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ assistant.py  # SREAssistant å¯¦ç¾
â”‚   â”‚   â””â”€â”€ intent.py     # æ„åœ–ç†è§£
â”‚   â”œâ”€â”€ experts/          # å°ˆå®¶ Agents
â”‚   â”‚   â”œâ”€â”€ diagnostic/   # è¨ºæ–·å°ˆå®¶
â”‚   â”‚   â”œâ”€â”€ postmortem/   # è¤‡ç›¤å°ˆå®¶
â”‚   â”‚   â””â”€â”€ remediation/  # ä¿®å¾©å°ˆå®¶
â”‚   â””â”€â”€ framework/        # ADK æ¡†æ¶
â”‚       â”œâ”€â”€ base.py       # Agent åŸºé¡
â”‚       â”œâ”€â”€ tools.py      # Tool åŒ…è£
â”‚       â””â”€â”€ memory.py     # ç‹€æ…‹ç®¡ç†
â”‚
â”œâ”€â”€ deploy/               # éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ docker/          # Docker ç›¸é—œ
â”‚   â”œâ”€â”€ k8s/             # Kubernetes é…ç½®
â”‚   â””â”€â”€ compose/         # Docker Compose
â”‚
â”œâ”€â”€ tests/               # æ¸¬è©¦å¥—ä»¶
â”‚   â”œâ”€â”€ unit/           # å–®å…ƒæ¸¬è©¦
â”‚   â”œâ”€â”€ integration/    # é›†æˆæ¸¬è©¦
â”‚   â””â”€â”€ e2e/            # ç«¯åˆ°ç«¯æ¸¬è©¦
â”‚
â”œâ”€â”€ docs/                # æ–‡æª”
â”‚   â”œâ”€â”€ architecture/   # æ¶æ§‹æ–‡æª”
â”‚   â”œâ”€â”€ api/            # API æ–‡æª”
â”‚   â””â”€â”€ guides/         # ä½¿ç”¨æŒ‡å—
â”‚
â”œâ”€â”€ scripts/            # è¼”åŠ©è…³æœ¬
â”‚   â”œâ”€â”€ setup.sh       # ç’°å¢ƒè¨­ç½®
â”‚   â”œâ”€â”€ test.sh        # æ¸¬è©¦è…³æœ¬
â”‚   â””â”€â”€ deploy.sh      # éƒ¨ç½²è…³æœ¬
â”‚
â”œâ”€â”€ Makefile           # æ§‹å»ºè‡ªå‹•åŒ–
â”œâ”€â”€ project.toml       # å°ˆæ¡ˆé…ç½®
â”œâ”€â”€ README.md          # å°ˆæ¡ˆèªªæ˜
â””â”€â”€ .env.example       # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
```

1. contracts/: é€™æ˜¯æ•´å€‹æ¶æ§‹ä¸­**æœ€é‡è¦**çš„ç›®éŒ„ã€‚å®ƒç”¨ proto æª”æ¡ˆå®šç¾©äº† Go å’Œ Python å…©å€‹ä¸–ç•Œä¹‹é–“å”¯ä¸€çš„ã€ç¥è–çš„é€šè¨Šå”å®šã€‚  
2. core/: é€™è£¡åªå­˜æ”¾ Go ç¨‹å¼ç¢¼ï¼Œè² è²¬å¹³å°çš„æ ¸å¿ƒç©©å®šæ€§ã€è³‡æºç®¡ç†å’Œå®‰å…¨ã€‚  
3. agents/: é€™è£¡åªå­˜æ”¾ Python ç¨‹å¼ç¢¼ï¼Œè² è²¬æ‰€æœ‰ Agent çš„æ™ºæ…§é‚è¼¯å’Œå¿«é€Ÿè¿­ä»£ã€‚  
4. project.toml (æˆ– pyproject.toml): æ¨™ç¤ºè‘—é€™æ˜¯ä¸€å€‹ç¾ä»£åŒ–çš„ Python å°ˆæ¡ˆï¼Œä¸¦çµ±ä¸€ç®¡ç† Python ç›¸é—œçš„ä¾è³´å’Œé…ç½®ã€‚  
5. .env.example: ç‚ºæ–°åŠ å…¥çš„é–‹ç™¼è€…æä¾›äº†æœ€æ¸…æ™°çš„ç’°å¢ƒè®Šæ•¸é…ç½®æŒ‡å—ã€‚  
6. Makefile: ä½œç‚ºé ‚å±¤çš„ã€Œç¸½æŒ‡æ®ã€ï¼Œæä¾›äº†å¦‚ make test, make build, make deploy é€™æ¨£ç°¡æ½”çš„ã€èˆ‡èªè¨€ç„¡é—œçš„å‘½ä»¤ï¼Œéš±è—äº†åº•å±¤çš„è¤‡é›œæ€§ã€‚

### æ ¸å¿ƒè¨­è¨ˆç†å¿µ

#### Agent vs Tool è·è²¬åŠƒåˆ†

> **é»ƒé‡‘æº–å‰‡**ï¼šAgent è² è²¬æ™ºèƒ½æ±ºç­–ï¼ŒTool è² è²¬å…·é«”åŸ·è¡Œ

```
Agent (æ±ºç­–å¤§è…¦)           Tool (åŸ·è¡Œæ‰‹è‡‚)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
WHY - ç‚ºä»€éº¼åš             HOW - å¦‚ä½•åš
WHAT - åšä»€éº¼             WHERE - åœ¨å“ªåš
WHEN - ä½•æ™‚åš             WITH - ç”¨ä»€éº¼åš
```

**è·è²¬é‚Šç•Œ**ï¼š
- **Agent è² è²¬æ±ºç­–**ï¼šåˆ†ææƒ…æ³ã€åˆ¶å®šç­–ç•¥ã€å”èª¿è³‡æº
- **Tool è² è²¬åŸ·è¡Œ**ï¼šæŸ¥è©¢æ•¸æ“šã€èª¿ç”¨ APIã€ç”Ÿæˆå ±å‘Š
- **Agent ä¸ç›´æ¥ç¢°æ•¸æ“š**ï¼šæ‰€æœ‰æ•¸æ“šæ“ä½œå¿…é ˆé€šé Tool
- **Tool ä¸åšæ±ºç­–**ï¼šåªæä¾›èƒ½åŠ›ï¼Œä¸åˆ¤æ–·æ˜¯å¦æ‡‰è©²åŸ·è¡Œ

### AI Agent åˆ†å±¤æ¶æ§‹

```mermaid
graph TB
    subgraph "ç”¨æˆ¶ä»‹é¢å±¤"
        UI[ADK Web UI / CLI]
    end
    
    subgraph "Agent æ±ºç­–å±¤ (Python)"
        A1[SREAssistant - çµ±ä¸€å…¥å£]
        A2[ObservabilityExpert]
        A3[IncidentInvestigator]
        A4[PredictiveAnalyst]
        A5[AutoRemediator]
    end
    
    subgraph "Tool åŸ·è¡Œå±¤ (Go)"
        T1[MetricsProvider]
        T2[HealthAggregator]
        T3[Dashboard Builder]
        T4[Runbook Executor]
    end
    
    subgraph "æ•¸æ“šå±¤"
        D1[Prometheus]
        D2[PostgreSQL]
        D3[Redis]
        D4[Grafana]
    end
    
    UI --> A1
    A1 --> A2
    A1 --> A3
    A1 --> A4
    A1 --> A5
    
    A2 --> T1
    A3 --> T2
    A4 --> T3
    A5 --> T4
    
    T1 --> D1
    T2 --> D1
    T3 --> D4
    T4 --> D2
    
    style A1 fill:#FFD700
    style UI fill:#90EE90
```

---

## æŠ€è¡“æ¶æ§‹

### æŠ€è¡“æ£§

```yaml
UI å±¤:
  - MVP: ADK Web (å…§å»º)
  - å¾ŒçºŒ: è‡ªå®šç¾© Web UI (å¯é¸)

AI/ML æ¡†æ¶:
  - LLM: ADK åŸç”Ÿæ”¯æ´ (Gemini/Claude/GPT)
  - å‚™é¸: Ollama + é–‹æºæ¨¡å‹
  - Agent Framework: Google ADK
  - å‘é‡DB: pgvector

åŸ·è¡Œå±¤:
  - èªè¨€: Go
  - æ¡†æ¶: ToolBridge + Plugin Host
  - é€šè¨Š: gRPC + Protocol Buffers

æ•¸æ“šå±¤:
  - æ™‚åºæ•¸æ“š: Prometheus
  - é—œä¿‚æ•¸æ“š: PostgreSQL
  - ç‹€æ…‹ç®¡ç†: Redis
  - å¯è¦–åŒ–: Grafana
```
