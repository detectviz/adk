# å·¥å…·ä»£ç† (Tool Agent)

ä¸€å€‹å°ˆé–€çš„é ç«¯ä»£ç† (Agent)ï¼Œé€éæ¨¡å‹ä¸Šä¸‹æ–‡å”å®š (MCP) å·¥å…·æä¾›å…¨é¢çš„é–‹ç™¼å’Œä»»å‹™å”åŠ©ã€‚æ­¤ä»£ç† (Agent) å¯åœ¨å¤šä»£ç† (multi-agent) ç³»çµ±ä¸­å•Ÿç”¨ git æ“ä½œã€IDE æ•´åˆå’Œå„ç¨®é–‹ç™¼å…¬ç”¨ç¨‹å¼ã€‚

## ğŸš€ ç¸½è¦½

å·¥å…·ä»£ç† (Tool Agent) æ˜¯ä¸€å€‹å¤šåŠŸèƒ½çš„é ç«¯ä»£ç† (Agent)ï¼Œå®ƒåˆ©ç”¨ï¼š
- **MCP SSE å¤–æ›ç¨‹å¼**ï¼šé€éæ¨¡å‹ä¸Šä¸‹æ–‡å”å®š (Model Context Protocol) ä¼ºæœå™¨å‚³é€äº‹ä»¶ (Server-Sent Events) çš„é–‹ç™¼å·¥å…·
- **Azure AI Agents**ï¼šæ ¸å¿ƒæ™ºæ…§èˆ‡æ±ºç­–èƒ½åŠ›
- **Semantic Kernel**ï¼šé€²éšçš„èªæ„ç†è§£èˆ‡å¤–æ›ç¨‹å¼ç®¡ç†
- **A2A å”å®š**ï¼šç”¨æ–¼ç„¡ç¸«ä»»å‹™å§”æ´¾çš„ä»£ç†å°ä»£ç† (Agent-to-Agent) é€šè¨Š

## ğŸ—ï¸ æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸»æ©Ÿä»£ç† (Host Agent)    â”‚â”€â”€â”€â–¶â”‚   å·¥å…·ä»£ç† (Tool Agent)    â”‚â”€â”€â”€â–¶â”‚  é–‹ç™¼å·¥å…· MCP  â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚     ä¼ºæœå™¨      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚                        â”‚
                              â–¼                        â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚ â€¢ Azure AI      â”‚    â”‚ â€¢ Git Clone     â”‚
                       â”‚ â€¢ Semantic      â”‚    â”‚ â€¢ VSCode é–‹å•Ÿ   â”‚
                       â”‚   Kernel        â”‚    â”‚ â€¢ æª”æ¡ˆæ“ä½œ      â”‚
                       â”‚ â€¢ MCP SSE       â”‚    â”‚ â€¢ é–‹ç™¼   â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‚ æª”æ¡ˆçµæ§‹

```
tool_agent/
â”œâ”€â”€ __main__.py              # ä¸»è¦é€²å…¥é»èˆ‡ä¼ºæœå™¨å•Ÿå‹•
â”œâ”€â”€ agent.py                 # å…·æœ‰ MCP æ•´åˆçš„æ ¸å¿ƒä»£ç† (Agent) å¯¦ä½œ
â”œâ”€â”€ agent_executor.py        # A2A å”å®šåŸ·è¡Œè™•ç†å¸¸å¼
â”œâ”€â”€ pyproject.toml          # å°ˆæ¡ˆç›¸ä¾æ€§èˆ‡è¨­å®š
â”œâ”€â”€ uv.lock                 # ç›¸ä¾æ€§é–å®šæª”æ¡ˆ
â””â”€â”€ README.md               # æœ¬æ–‡ä»¶
```

## ğŸ”§ å…ƒä»¶

### 1. æ ¸å¿ƒä»£ç† (Core Agent) (`agent.py`)

**`SemanticKernelMCPAgent`** - ä¸»è¦ä»£ç† (Agent) é¡åˆ¥ï¼ŒåŠŸèƒ½å¦‚ä¸‹ï¼š
- ä½¿ç”¨ Azure æ†‘è­‰åˆå§‹åŒ– Azure AI Agent
- ç‚ºé–‹ç™¼å·¥å…·è¨­å®š MCP SSE å¤–æ›ç¨‹å¼
- ç®¡ç†é–‹ç™¼ä»»å‹™åŸ·è¡Œå’Œå·¥å…·å”èª¿
- æä¾›ä¸²æµå’ŒåŒæ­¥å›æ‡‰åŠŸèƒ½

**ä¸»è¦æ–¹æ³•ï¼š**
- `initialize(mcp_url)`ï¼šä½¿ç”¨å¯è¨­å®šçš„ä¼ºæœå™¨ URL è¨­å®š MCP SSE å¤–æ›ç¨‹å¼
- `invoke(user_input, session_id)`ï¼šå…·æœ‰å®Œæ•´å›æ‡‰çš„åŒæ­¥ä»»å‹™è™•ç†
- `stream(user_input, session_id)`ï¼šéåŒæ­¥ä¸²æµä»»å‹™åŸ·è¡Œ
- `cleanup()`ï¼šé©ç•¶çš„è³‡æºæ¸…ç†å’Œé€£ç·šç®¡ç†

### 2. ä»£ç† (Agent) åŸ·è¡Œå™¨ (`agent_executor.py`)

**`SemanticKernelMCPAgentExecutor`** - A2A å”å®šè™•ç†å¸¸å¼ï¼ŒåŠŸèƒ½å¦‚ä¸‹ï¼š
- å¯¦ä½œ `AgentExecutor` ä»‹é¢ä»¥é€²è¡Œæ¨™æº–åŒ–çš„ä»£ç† (Agent) é€šè¨Š
- é€éå…¨é¢çš„ç‹€æ…‹è¿½è¹¤ç®¡ç†ä»»å‹™ç”Ÿå‘½é€±æœŸ
- è™•ç†äº‹ä»¶ä½‡åˆ—å’Œå³æ™‚é€šçŸ¥
- æä¾›å…·æœ‰å¼·å¤§éŒ¯èª¤è™•ç†å’Œå¾©åŸåŠŸèƒ½çš„ä¸²æµåŸ·è¡Œ

### 3. ä¼ºæœå™¨æ‡‰ç”¨ç¨‹å¼ (`__main__.py`)

**ä¸»ä¼ºæœå™¨** - HTTP ä¼ºæœå™¨ï¼ŒåŠŸèƒ½å¦‚ä¸‹ï¼š
- é€é A2A Starlette æ‡‰ç”¨ç¨‹å¼å…¬é–‹ä»£ç† (Agent) åŠŸèƒ½
- å®šç¾©å…·æœ‰é–‹ç™¼å·¥å…·æŠ€èƒ½çš„ç¶œåˆä»£ç†å¡ (agent card)
- ç‚ºå³æ™‚å›æ‡‰è¨­å®šä¸²æµåŠŸèƒ½
- åœ¨å¯è¨­å®šçš„ä¸»æ©Ÿå’Œé€šè¨ŠåŸ ä¸ŠåŸ·è¡Œï¼ˆé è¨­ï¼šlocalhost:10002ï¼‰

## ğŸ¯ åŠŸèƒ½

### é–‹ç™¼å·¥å…·
- **Git æ“ä½œ**ï¼šå„²å­˜åº«è¤‡è£½ã€åˆ†æ”¯ç®¡ç†ã€æäº¤æ“ä½œ
- **IDE æ•´åˆ**ï¼šVSCode å’Œ VSCode Insiders å°ˆæ¡ˆé–‹å•Ÿ
- **æª”æ¡ˆç®¡ç†**ï¼šæª”æ¡ˆç³»çµ±æ“ä½œã€ç›®éŒ„å°è¦½
- **å°ˆæ¡ˆè¨­å®š**ï¼šé–‹ç™¼ç’°å¢ƒåˆå§‹åŒ–

### é€²éšåŠŸèƒ½
- **å„²å­˜åº«ç®¡ç†**ï¼šè¤‡è£½å„²å­˜åº«ä¸¦åœ¨åå¥½çš„ IDE ä¸­é–‹å•Ÿ
- **é–‹ç™¼å·¥ä½œæµç¨‹**ï¼šç°¡åŒ–çš„é–‹ç™¼ä»»å‹™è‡ªå‹•åŒ–
- **å·¥å…·éˆæ•´åˆ**ï¼šèˆ‡é–‹ç™¼å·¥å…·çš„ç„¡ç¸«æ•´åˆ
- **è·¨å¹³å°æ”¯æ´**ï¼šå¯åœ¨ä¸åŒä½œæ¥­ç³»çµ±ä¸Šé‹ä½œ

## ğŸ“‹ å…ˆæ±ºæ¢ä»¶

### ç³»çµ±éœ€æ±‚
- **Python 3.13+**
- **MCP ä¼ºæœå™¨**ï¼šåŸ·è¡Œé–‹ç™¼å·¥å…· MCP ä¼ºæœå™¨
- **Azure AI Foundry** å°ˆæ¡ˆï¼Œä¸¦å·²éƒ¨ç½²æ¨¡å‹
- **Git**ï¼šç”¨æ–¼å„²å­˜åº«æ“ä½œï¼ˆå¯é¸ï¼‰
- **VSCode/VSCode Insiders**ï¼šç”¨æ–¼ IDE æ•´åˆï¼ˆå¯é¸ï¼‰

### ç›¸ä¾æ€§
é€é `pyproject.toml` ç®¡ç†çš„æ ¸å¿ƒç›¸ä¾æ€§ï¼š
```toml
dependencies = [
    "a2a-sdk>=0.2.7",
    "mcp>=1.9.4",
    "azure-ai-agents>=1.1.0b1", 
    "semantic-kernel>=1.33.0",
]
```

## âš™ï¸ å®‰è£èˆ‡è¨­å®š

### 1. å®‰è£ç›¸ä¾æ€§
```bash
cd remote_agents/tool_agent

# ä½¿ç”¨ uv (å»ºè­°)
uv sync
```


### 3. è¨­å®šç’°å¢ƒ
é€éè¤‡è£½ç¯„ä¾‹ç¯„æœ¬ä¾†å»ºç«‹ä¸€å€‹ `.env` æª”æ¡ˆï¼š

```bash
cp .env.example .env
```


### ä»»å‹™ç¯„ä¾‹

æ­¤ä»£ç† (Agent) å¯ä»¥è™•ç†å„ç¨®é–‹ç™¼å’Œå·¥å…·ç›¸é—œçš„ä»»å‹™ï¼š

**Git æ“ä½œï¼š**
```
"è¤‡è£½ https://github.com/kinfey/mcpdemo1"
"è¤‡è£½å„²å­˜åº«ä¸¦åœ¨ VSCode ä¸­é–‹å•Ÿ"
"è¤‡è£½ https://github.com/user/repo ä¸¦ä½¿ç”¨ VSCode Insiders é–‹å•Ÿ"
```

